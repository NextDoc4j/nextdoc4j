var Un=Object.defineProperty,Gn=Object.defineProperties;var Yn=Object.getOwnPropertyDescriptors;var Ye=Object.getOwnPropertySymbols;var Rt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable;var At=(e,t,n)=>t in e?Un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M=(e,t)=>{for(var n in t||(t={}))Rt.call(t,n)&&At(e,n,t[n]);if(Ye)for(var n of Ye(t))Pt.call(t,n)&&At(e,n,t[n]);return e},x=(e,t)=>Gn(e,Yn(t));var zt=(e,t)=>{var n={};for(var s in e)Rt.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&Ye)for(var s of Ye(e))t.indexOf(s)<0&&Pt.call(e,s)&&(n[s]=e[s]);return n};var Ft=(e,t,n)=>new Promise((s,l)=>{var a=d=>{try{f(n.next(d))}catch(v){l(v)}},o=d=>{try{f(n.throw(d))}catch(v){l(v)}},f=d=>d.done?s(d.value):Promise.resolve(d.value).then(a,o);f((n=n.apply(e,t)).next())});import{a as gt,l as yt,a5 as Se,n as ue,X as De,B as H,o as _,f as Ee,s as Zt,ab as Qn,V as Jn,t as ne,ao as Ht,a8 as de,p as Xn,aa as Zn,m as Be,x as xn,J as rt,S as _n,r as el,v as Ae,ap as tl,E as xt,ax as nl,w as tt,W as _t,D as ll,H as ol,Y as Wt,ay as it,az as sl,L as al,aA as il,M as rl,a9 as dl,q as cl}from"./bootstrap-CqDtmTe9.js";import{d as ul,u as jt,E as fl,a as hl}from"./index-BpGIegWj.js";import{s as pl,E as vl}from"./index-vyF7GDuW.js";import{t as qt,E as gl}from"./index-D9W-BSPZ.js";import{e as en}from"./strings-BQiYBymk.js";import{t as yl,d as Ut}from"./error-C2hIFQwM.js";import{k as le,m as k,a5 as ae,K as ml,w as L,l as Ce,d as Z,S as ve,f as V,o as w,z as F,j as R,A as oe,P as E,u as Je,ac as Fe,Q as ce,a9 as bl,$ as j,x as P,M as we,r as T,n as Te,i as G,a1 as Cl,a as ie,av as kl,U as mt,X as J,ah as Nl,D as se,B as W,q as U,F as xe,Y as _e,E as Gt,y as Pe,aw as El,a8 as be,b as Sl,R as tn,a2 as wl,h as dt,e as ze}from"../jse/index-index-Cxxqr7bn.js";import{c as pe,E as Kl}from"./index-DE-tz6-4.js";import{a as Ke}from"./isEqual-BznGHF9m.js";import{b as nn,u as Ol,a as Dl}from"./use-form-item-thfI7w38.js";import{a as Tl,u as Il}from"./index-BTSQZUog.js";import{u as ln,a as Vl}from"./use-form-common-props-1NQPH8QO.js";import{U as te,C as on,u as $l,p as et}from"./index-BfKGjZHb.js";import{f as Ml,u as Ll}from"./index-BthzRI8k.js";import{C as Bl}from"./index-UzjMp5bv.js";import{f as Al}from"./vnode-C9aqsYrT.js";import{ElCheckbox as Rl}from"./index-DPxgLR-z.js";import"./_baseFindIndex-D7XfJLKM.js";import"./index-L6nNazHT.js";function Pl(e,t){if(!gt)return;if(!t){e.scrollTop=0;return}const n=[];let s=t.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)n.push(s),s=s.offsetParent;const l=t.offsetTop+n.reduce((d,v)=>d+v.offsetTop,0),a=l+t.offsetHeight,o=e.scrollTop,f=o+e.clientHeight;l<o?e.scrollTop=l:a>f&&(e.scrollTop=a-e.clientHeight)}const sn=Symbol("ElSelectGroup"),Ie=Symbol("ElSelect"),ct="ElOption",zl=yt({value:{type:[String,Number,Boolean,Object],required:!0},label:{type:[String,Number]},created:Boolean,disabled:Boolean});function Fl(e,t){const n=le(Ie);n||yl(ct,"usage: <el-select><el-option /></el-select/>");const s=le(sn,{disabled:!1}),l=k(()=>u(pe(n.props.modelValue),e.value)),a=k(()=>{var c;if(n.props.multiple){const h=pe((c=n.props.modelValue)!=null?c:[]);return!l.value&&h.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),o=k(()=>{var c;return(c=e.label)!=null?c:ae(e.value)?"":e.value}),f=k(()=>e.value||e.label||""),d=k(()=>e.disabled||t.groupDisabled||a.value),v=Ce(),u=(c=[],h)=>{if(ae(e.value)){const m=n.props.valueKey;return c&&c.some(C=>ml(Se(C,m))===Se(h,m))}else return c&&c.includes(h)},p=()=>{!e.disabled&&!s.disabled&&(n.states.hoveringIndex=n.optionsArray.indexOf(v.proxy))},r=c=>{const h=new RegExp(en(c),"i");t.visible=h.test(String(o.value))||e.created};return L(()=>o.value,()=>{!e.created&&!n.props.remote&&n.setSelected()}),L(()=>e.value,(c,h)=>{const{remote:m,valueKey:C}=n.props;if((m?c!==h:!Ke(c,h))&&(n.onOptionDestroy(h,v.proxy),n.onOptionCreate(v.proxy)),!e.created&&!m){if(C&&ae(c)&&ae(h)&&c[C]===h[C])return;n.setSelected()}}),L(()=>s.disabled,()=>{t.groupDisabled=s.disabled},{immediate:!0}),{select:n,currentLabel:o,currentValue:f,itemSelected:l,isDisabled:d,hoverItem:p,updateOption:r}}const Hl=Z({name:ct,componentName:ct,props:zl,setup(e){const t=_("select"),n=nn(),s=k(()=>[t.be("dropdown","item"),t.is("disabled",Je(f)),t.is("selected",Je(o)),t.is("hovering",Je(r))]),l=ce({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:a,itemSelected:o,isDisabled:f,select:d,hoverItem:v,updateOption:u}=Fl(e,l),{visible:p,hover:r}=Fe(l),c=Ce().proxy;d.onOptionCreate(c),bl(()=>{const m=c.value,{selected:C}=d.states,N=C.some(I=>I.value===c.value);j(()=>{d.states.cachedOptions.get(m)===c&&!N&&d.states.cachedOptions.delete(m)}),d.onOptionDestroy(m,c)});function h(){f.value||d.handleOptionSelect(c)}return{ns:t,id:n,containerKls:s,currentLabel:a,itemSelected:o,isDisabled:f,select:d,visible:p,hover:r,states:l,hoverItem:v,updateOption:u,selectOptionClick:h}}});function Wl(e,t){return ve((w(),V("li",{id:e.id,class:E(e.containerKls),role:"option","aria-disabled":e.isDisabled||void 0,"aria-selected":e.itemSelected,onMousemove:e.hoverItem,onClick:H(e.selectOptionClick,["stop"])},[F(e.$slots,"default",{},()=>[R("span",null,oe(e.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[De,e.visible]])}var bt=ue(Hl,[["render",Wl],["__file","option.vue"]]);const jl=Z({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=le(Ie),t=_("select"),n=k(()=>e.props.popperClass),s=k(()=>e.props.multiple),l=k(()=>e.props.fitInputWidth),a=T("");function o(){var f;a.value=`${(f=e.selectRef)==null?void 0:f.offsetWidth}px`}return Te(()=>{o(),Ee(e.selectRef,o)}),{ns:t,minWidth:a,popperClass:n,isMultiple:s,isFitInputWidth:l}}});function ql(e,t,n,s,l,a){return w(),V("div",{class:E([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:we({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[e.$slots.header?(w(),V("div",{key:0,class:E(e.ns.be("dropdown","header"))},[F(e.$slots,"header")],2)):P("v-if",!0),F(e.$slots,"default"),e.$slots.footer?(w(),V("div",{key:1,class:E(e.ns.be("dropdown","footer"))},[F(e.$slots,"footer")],2)):P("v-if",!0)],6)}var Ul=ue(jl,[["render",ql],["__file","select-dropdown.vue"]]);const Gl=(e,t)=>{const{t:n}=Zt(),s=nn(),l=_("select"),a=_("input"),o=ce({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),f=T(),d=T(),v=T(),u=T(),p=T(),r=T(),c=T(),h=T(),m=T(),C=T(),N=T(),{isComposing:I,handleCompositionStart:$,handleCompositionUpdate:O,handleCompositionEnd:B}=Tl({afterComposition:i=>Tt(i)}),{wrapperRef:re,isFocused:q,handleBlur:fe}=Il(p,{beforeFocus(){return ge.value},afterFocus(){e.automaticDropdown&&!y.value&&(y.value=!0,o.menuVisibleOnFocus=!0)},beforeBlur(i){var g,S;return((g=v.value)==null?void 0:g.isFocusInsideContent(i))||((S=u.value)==null?void 0:S.isFocusInsideContent(i))},afterBlur(){var i;y.value=!1,o.menuVisibleOnFocus=!1,e.validateEvent&&((i=Y==null?void 0:Y.validate)==null||i.call(Y,"blur").catch(g=>Ut()))}}),y=T(!1),K=T(),{form:z,formItem:Y}=Ol(),{inputId:nt}=Dl(e,{formItemContext:Y}),{valueOnClear:lt,isEmptyValue:ot}=Qn(e),ge=k(()=>e.disabled||(z==null?void 0:z.disabled)),Ve=k(()=>G(e.modelValue)?e.modelValue.length>0:!ot(e.modelValue)),b=k(()=>{var i;return(i=z==null?void 0:z.statusIcon)!=null?i:!1}),D=k(()=>e.clearable&&!ge.value&&o.inputHovering&&Ve.value),ee=k(()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon),ye=k(()=>l.is("reverse",!!(ee.value&&y.value))),st=k(()=>(Y==null?void 0:Y.validateState)||""),un=k(()=>st.value&&Jn[st.value]),fn=k(()=>e.remote?300:0),hn=k(()=>e.remote&&!o.inputValue&&o.options.size===0),pn=k(()=>e.loading?e.loadingText||n("el.select.loading"):e.filterable&&o.inputValue&&o.options.size>0&&$e.value===0?e.noMatchText||n("el.select.noMatch"):o.options.size===0?e.noDataText||n("el.select.noData"):null),$e=k(()=>Q.value.filter(i=>i.visible).length),Q=k(()=>{const i=Array.from(o.options.values()),g=[];return o.optionValues.forEach(S=>{const A=i.findIndex(X=>X.value===S);A>-1&&g.push(i[A])}),g.length>=i.length?g:i}),vn=k(()=>Array.from(o.cachedOptions.values())),gn=k(()=>{const i=Q.value.filter(g=>!g.created).some(g=>g.currentLabel===o.inputValue);return e.filterable&&e.allowCreate&&o.inputValue!==""&&!i}),Et=()=>{e.filterable&&ie(e.filterMethod)||e.filterable&&e.remote&&ie(e.remoteMethod)||Q.value.forEach(i=>{var g;(g=i.updateOption)==null||g.call(i,o.inputValue)})},St=ln(),yn=k(()=>["small"].includes(St.value)?"small":"default"),mn=k({get(){return y.value&&!hn.value},set(i){y.value=i}}),bn=k(()=>{if(e.multiple&&!ne(e.modelValue))return pe(e.modelValue).length===0&&!o.inputValue;const i=G(e.modelValue)?e.modelValue[0]:e.modelValue;return e.filterable||ne(i)?!o.inputValue:!0}),Cn=k(()=>{var i;const g=(i=e.placeholder)!=null?i:n("el.select.placeholder");return e.multiple||!Ve.value?g:o.selectedLabel}),kn=k(()=>Ht?null:"mouseenter");L(()=>e.modelValue,(i,g)=>{e.multiple&&e.filterable&&!e.reserveKeyword&&(o.inputValue="",He("")),We(),!Ke(i,g)&&e.validateEvent&&(Y==null||Y.validate("change").catch(S=>Ut()))},{flush:"post",deep:!0}),L(()=>y.value,i=>{i?He(o.inputValue):(o.inputValue="",o.previousQuery=null,o.isBeforeHide=!0),t("visible-change",i)}),L(()=>o.options.entries(),()=>{gt&&(We(),e.defaultFirstOption&&(e.filterable||e.remote)&&$e.value&&wt())},{flush:"post"}),L([()=>o.hoveringIndex,Q],([i])=>{Xn(i)&&i>-1?K.value=Q.value[i]||{}:K.value={},Q.value.forEach(g=>{g.hover=K.value===g})}),Cl(()=>{o.isBeforeHide||Et()});const He=i=>{o.previousQuery===i||I.value||(o.previousQuery=i,e.filterable&&ie(e.filterMethod)?e.filterMethod(i):e.filterable&&e.remote&&ie(e.remoteMethod)&&e.remoteMethod(i),e.defaultFirstOption&&(e.filterable||e.remote)&&$e.value?j(wt):j(Nn))},wt=()=>{const i=Q.value.filter(X=>X.visible&&!X.disabled&&!X.states.groupDisabled),g=i.find(X=>X.created),S=i[0],A=Q.value.map(X=>X.value);o.hoveringIndex=Mt(A,g||S)},We=()=>{if(e.multiple)o.selectedLabel="";else{const g=G(e.modelValue)?e.modelValue[0]:e.modelValue,S=Kt(g);o.selectedLabel=S.currentLabel,o.selected=[S];return}const i=[];ne(e.modelValue)||pe(e.modelValue).forEach(g=>{i.push(Kt(g))}),o.selected=i},Kt=i=>{let g;const S=kl(i);for(let ke=o.cachedOptions.size-1;ke>=0;ke--){const he=vn.value[ke];if(S?Se(he.value,e.valueKey)===Se(i,e.valueKey):he.value===i){g={value:i,currentLabel:he.currentLabel,get isDisabled(){return he.isDisabled}};break}}if(g)return g;const A=S?i.label:i!=null?i:"";return{value:i,currentLabel:A}},Nn=()=>{o.hoveringIndex=Q.value.findIndex(i=>o.selected.some(g=>Ue(g)===Ue(i)))},En=()=>{o.selectionWidth=Number.parseFloat(window.getComputedStyle(d.value).width)},Sn=()=>{o.collapseItemWidth=C.value.getBoundingClientRect().width},at=()=>{var i,g;(g=(i=v.value)==null?void 0:i.updatePopper)==null||g.call(i)},Ot=()=>{var i,g;(g=(i=u.value)==null?void 0:i.updatePopper)==null||g.call(i)},Dt=()=>{o.inputValue.length>0&&!y.value&&(y.value=!0),He(o.inputValue)},Tt=i=>{if(o.inputValue=i.target.value,e.remote)It();else return Dt()},It=ul(()=>{Dt()},fn.value),Me=i=>{Ke(e.modelValue,i)||t(on,i)},wn=i=>Ml(i,g=>{const S=o.cachedOptions.get(g);return S&&!S.disabled&&!S.states.groupDisabled}),Kn=i=>{if(e.multiple&&i.code!==de.delete&&i.target.value.length<=0){const g=pe(e.modelValue).slice(),S=wn(g);if(S<0)return;const A=g[S];g.splice(S,1),t(te,g),Me(g),t("remove-tag",A)}},On=(i,g)=>{const S=o.selected.indexOf(g);if(S>-1&&!ge.value){const A=pe(e.modelValue).slice();A.splice(S,1),t(te,A),Me(A),t("remove-tag",g.value)}i.stopPropagation(),qe()},Vt=i=>{i.stopPropagation();const g=e.multiple?[]:lt.value;if(e.multiple)for(const S of o.selected)S.isDisabled&&g.push(S.value);t(te,g),Me(g),o.hoveringIndex=-1,y.value=!1,t("clear"),qe()},$t=i=>{var g;if(e.multiple){const S=pe((g=e.modelValue)!=null?g:[]).slice(),A=Mt(S,i);A>-1?S.splice(A,1):(e.multipleLimit<=0||S.length<e.multipleLimit)&&S.push(i.value),t(te,S),Me(S),i.created&&He(""),e.filterable&&!e.reserveKeyword&&(o.inputValue="")}else t(te,i.value),Me(i.value),y.value=!1;qe(),!y.value&&j(()=>{je(i)})},Mt=(i,g)=>ne(g)?-1:ae(g.value)?i.findIndex(S=>Ke(Se(S,e.valueKey),Ue(g))):i.indexOf(g.value),je=i=>{var g,S,A,X,ke;const he=G(i)?i[0]:i;let Ge=null;if(he!=null&&he.value){const Le=Q.value.filter(qn=>qn.value===he.value);Le.length>0&&(Ge=Le[0].$el)}if(v.value&&Ge){const Le=(X=(A=(S=(g=v.value)==null?void 0:g.popperRef)==null?void 0:S.contentRef)==null?void 0:A.querySelector)==null?void 0:X.call(A,`.${l.be("dropdown","wrap")}`);Le&&Pl(Le,Ge)}(ke=N.value)==null||ke.handleScroll()},Dn=i=>{o.options.set(i.value,i),o.cachedOptions.set(i.value,i)},Tn=(i,g)=>{o.options.get(i)===g&&o.options.delete(i)},In=k(()=>{var i,g;return(g=(i=v.value)==null?void 0:i.popperRef)==null?void 0:g.contentRef}),Vn=()=>{o.isBeforeHide=!1,j(()=>{var i;(i=N.value)==null||i.update(),je(o.selected)})},qe=()=>{var i;(i=p.value)==null||i.focus()},$n=()=>{var i;if(y.value){y.value=!1,j(()=>{var g;return(g=p.value)==null?void 0:g.blur()});return}(i=p.value)==null||i.blur()},Mn=i=>{Vt(i)},Ln=i=>{if(y.value=!1,q.value){const g=new FocusEvent("focus",i);j(()=>fe(g))}},Bn=()=>{o.inputValue.length>0?o.inputValue="":y.value=!1},Lt=()=>{ge.value||(Ht&&(o.inputHovering=!0),o.menuVisibleOnFocus?o.menuVisibleOnFocus=!1:y.value=!y.value)},An=()=>{if(!y.value)Lt();else{const i=Q.value[o.hoveringIndex];i&&!i.isDisabled&&$t(i)}},Ue=i=>ae(i.value)?Se(i.value,e.valueKey):i.value,Rn=k(()=>Q.value.filter(i=>i.visible).every(i=>i.isDisabled)),Pn=k(()=>e.multiple?e.collapseTags?o.selected.slice(0,e.maxCollapseTags):o.selected:[]),zn=k(()=>e.multiple?e.collapseTags?o.selected.slice(e.maxCollapseTags):[]:[]),Bt=i=>{if(!y.value){y.value=!0;return}if(!(o.options.size===0||$e.value===0||I.value)&&!Rn.value){i==="next"?(o.hoveringIndex++,o.hoveringIndex===o.options.size&&(o.hoveringIndex=0)):i==="prev"&&(o.hoveringIndex--,o.hoveringIndex<0&&(o.hoveringIndex=o.options.size-1));const g=Q.value[o.hoveringIndex];(g.isDisabled||!g.visible)&&Bt(i),j(()=>je(K.value))}},Fn=()=>{if(!d.value)return 0;const i=window.getComputedStyle(d.value);return Number.parseFloat(i.gap||"6px")},Hn=k(()=>{const i=Fn();return{maxWidth:`${C.value&&e.maxCollapseTags===1?o.selectionWidth-o.collapseItemWidth-i:o.selectionWidth}px`}}),Wn=k(()=>({maxWidth:`${o.selectionWidth}px`})),jn=i=>{t("popup-scroll",i)};return Ee(d,En),Ee(h,at),Ee(re,at),Ee(m,Ot),Ee(C,Sn),Te(()=>{We()}),{inputId:nt,contentId:s,nsSelect:l,nsInput:a,states:o,isFocused:q,expanded:y,optionsArray:Q,hoverOption:K,selectSize:St,filteredOptionsCount:$e,updateTooltip:at,updateTagTooltip:Ot,debouncedOnInputChange:It,onInput:Tt,deletePrevTag:Kn,deleteTag:On,deleteSelected:Vt,handleOptionSelect:$t,scrollToOption:je,hasModelValue:Ve,shouldShowPlaceholder:bn,currentPlaceholder:Cn,mouseEnterEventName:kn,needStatusIcon:b,showClose:D,iconComponent:ee,iconReverse:ye,validateState:st,validateIcon:un,showNewOption:gn,updateOptions:Et,collapseTagSize:yn,setSelected:We,selectDisabled:ge,emptyText:pn,handleCompositionStart:$,handleCompositionUpdate:O,handleCompositionEnd:B,onOptionCreate:Dn,onOptionDestroy:Tn,handleMenuEnter:Vn,focus:qe,blur:$n,handleClearClick:Mn,handleClickOutside:Ln,handleEsc:Bn,toggleMenu:Lt,selectOption:An,getValueKey:Ue,navigateOptions:Bt,dropdownMenuVisible:mn,showTagList:Pn,collapseTagList:zn,popupScroll:jn,tagStyle:Hn,collapseTagStyle:Wn,popperRef:In,inputRef:p,tooltipRef:v,tagTooltipRef:u,prefixRef:r,suffixRef:c,selectRef:f,wrapperRef:re,selectionRef:d,scrollbarRef:N,menuRef:h,tagMenuRef:m,collapseItemRef:C}};var Yl=Z({name:"ElOptions",setup(e,{slots:t}){const n=le(Ie);let s=[];return()=>{var l,a;const o=(l=t.default)==null?void 0:l.call(t),f=[];function d(v){G(v)&&v.forEach(u=>{var p,r,c,h;const m=(p=(u==null?void 0:u.type)||{})==null?void 0:p.name;m==="ElOptionGroup"?d(!mt(u.children)&&!G(u.children)&&ie((r=u.children)==null?void 0:r.default)?(c=u.children)==null?void 0:c.default():u.children):m==="ElOption"?f.push((h=u.props)==null?void 0:h.value):G(u.children)&&d(u.children)})}return o.length&&d((a=o[0])==null?void 0:a.children),Ke(f,s)||(s=f,n&&(n.states.optionValues=f)),o}}});const Ql=yt(M(M({name:String,id:String,modelValue:{type:Be([Array,String,Number,Boolean,Object]),default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:el,effect:{type:Be(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Be(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:jt.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:rt,default:_n},fitInputWidth:Boolean,suffixIcon:{type:rt,default:xn},tagType:x(M({},qt.type),{default:"info"}),tagEffect:x(M({},qt.effect),{default:"light"}),validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:Be(String),values:fl,default:"bottom-start"},fallbackPlacements:{type:Be(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:jt.appendTo},Zn),$l(["ariaLabel"])));pl.scroll;const Yt="ElSelect",Jl=Z({name:Yt,componentName:Yt,components:{ElSelectMenu:Ul,ElOption:bt,ElOptions:Yl,ElTag:gl,ElScrollbar:vl,ElTooltip:hl,ElIcon:xt},directives:{ClickOutside:Bl},props:Ql,emits:[te,on,"remove-tag","clear","visible-change","focus","blur","popup-scroll"],setup(e,{emit:t,slots:n}){const s=Ce();s.appContext.config.warnHandler=(...r)=>{!r[0]||r[0].includes('Slot "default" invoked outside of the render function')||console.warn(...r)};const l=k(()=>{const{modelValue:r,multiple:c}=e,h=c?[]:void 0;return G(r)?c?r:h:c?h:r}),a=ce(x(M({},Fe(e)),{modelValue:l})),o=Gl(a,t),{calculatorRef:f,inputStyle:d}=Ll(),v=r=>r.reduce((c,h)=>(c.push(h),h.children&&h.children.length>0&&c.push(...v(h.children)),c),[]),u=r=>{Al(r||[]).forEach(h=>{var m;if(ae(h)&&(h.type.name==="ElOption"||h.type.name==="ElTree")){const C=h.type.name;if(C==="ElTree"){const N=((m=h.props)==null?void 0:m.data)||[];v(N).forEach($=>{$.currentLabel=$.label||(ae($.value)?"":$.value),o.onOptionCreate($)})}else if(C==="ElOption"){const N=M({},h.props);N.currentLabel=N.label||(ae(N.value)?"":N.value),o.onOptionCreate(N)}}})};L(()=>{var r;return(r=n.default)==null?void 0:r.call(n)},r=>{e.persistent||u(r)},{immediate:!0}),be(Ie,ce({props:a,states:o.states,selectRef:o.selectRef,optionsArray:o.optionsArray,setSelected:o.setSelected,handleOptionSelect:o.handleOptionSelect,onOptionCreate:o.onOptionCreate,onOptionDestroy:o.onOptionDestroy}));const p=k(()=>e.multiple?o.states.selected.map(r=>r.currentLabel):o.states.selectedLabel);return x(M({},o),{modelValue:l,selectedLabel:p,calculatorRef:f,inputStyle:d})}});function Xl(e,t){const n=J("el-tag"),s=J("el-tooltip"),l=J("el-icon"),a=J("el-option"),o=J("el-options"),f=J("el-scrollbar"),d=J("el-select-menu"),v=Nl("click-outside");return ve((w(),V("div",{ref:"selectRef",class:E([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),[El(e.mouseEnterEventName)]:u=>e.states.inputHovering=!0,onMouseleave:u=>e.states.inputHovering=!1},[se(s,{ref:"tooltipRef",visible:e.dropdownMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:u=>e.states.isBeforeHide=!1},{default:W(()=>{var u;return[R("div",{ref:"wrapperRef",class:E([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:H(e.toggleMenu,["prevent"])},[e.$slots.prefix?(w(),V("div",{key:0,ref:"prefixRef",class:E(e.nsSelect.e("prefix"))},[F(e.$slots,"prefix")],2)):P("v-if",!0),R("div",{ref:"selectionRef",class:E([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.states.selected.length)])},[e.multiple?F(e.$slots,"tag",{key:0},()=>[(w(!0),V(xe,null,_e(e.showTagList,p=>(w(),V("div",{key:e.getValueKey(p),class:E(e.nsSelect.e("selected-item"))},[se(n,{closable:!e.selectDisabled&&!p.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:we(e.tagStyle),onClose:r=>e.deleteTag(r,p)},{default:W(()=>[R("span",{class:E(e.nsSelect.e("tags-text"))},[F(e.$slots,"label",{label:p.currentLabel,value:p.value},()=>[Gt(oe(p.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.states.selected.length>e.maxCollapseTags?(w(),U(s,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:W(()=>[R("div",{ref:"collapseItemRef",class:E(e.nsSelect.e("selected-item"))},[se(n,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:we(e.collapseTagStyle)},{default:W(()=>[R("span",{class:E(e.nsSelect.e("tags-text"))}," + "+oe(e.states.selected.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:W(()=>[R("div",{ref:"tagMenuRef",class:E(e.nsSelect.e("selection"))},[(w(!0),V(xe,null,_e(e.collapseTagList,p=>(w(),V("div",{key:e.getValueKey(p),class:E(e.nsSelect.e("selected-item"))},[se(n,{class:"in-tooltip",closable:!e.selectDisabled&&!p.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:r=>e.deleteTag(r,p)},{default:W(()=>[R("span",{class:E(e.nsSelect.e("tags-text"))},[F(e.$slots,"label",{label:p.currentLabel,value:p.value},()=>[Gt(oe(p.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):P("v-if",!0)]):P("v-if",!0),R("div",{class:E([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[ve(R("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":p=>e.states.inputValue=p,type:"text",name:e.name,class:E([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:we(e.inputStyle),tabindex:e.tabindex,role:"combobox",readonly:!e.filterable,spellcheck:"false","aria-activedescendant":((u=e.hoverOption)==null?void 0:u.id)||"","aria-controls":e.contentId,"aria-expanded":e.dropdownMenuVisible,"aria-label":e.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[Ae(H(p=>e.navigateOptions("next"),["stop","prevent"]),["down"]),Ae(H(p=>e.navigateOptions("prev"),["stop","prevent"]),["up"]),Ae(H(e.handleEsc,["stop","prevent"]),["esc"]),Ae(H(e.selectOption,["stop","prevent"]),["enter"]),Ae(H(e.deletePrevTag,["stop"]),["delete"])],onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onInput:e.onInput,onClick:H(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[tl,e.states.inputValue]]),e.filterable?(w(),V("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:E(e.nsSelect.e("input-calculator")),textContent:oe(e.states.inputValue)},null,10,["textContent"])):P("v-if",!0)],2),e.shouldShowPlaceholder?(w(),V("div",{key:1,class:E([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?F(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[R("span",null,oe(e.currentPlaceholder),1)]):(w(),V("span",{key:1},oe(e.currentPlaceholder),1))],2)):P("v-if",!0)],2),R("div",{ref:"suffixRef",class:E(e.nsSelect.e("suffix"))},[e.iconComponent&&!e.showClose?(w(),U(l,{key:0,class:E([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:W(()=>[(w(),U(Pe(e.iconComponent)))]),_:1},8,["class"])):P("v-if",!0),e.showClose&&e.clearIcon?(w(),U(l,{key:1,class:E([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.nsSelect.e("clear")]),onClick:e.handleClearClick},{default:W(()=>[(w(),U(Pe(e.clearIcon)))]),_:1},8,["class","onClick"])):P("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(w(),U(l,{key:2,class:E([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading",e.validateState==="validating")])},{default:W(()=>[(w(),U(Pe(e.validateIcon)))]),_:1},8,["class"])):P("v-if",!0)],2)],10,["onClick"])]}),content:W(()=>[se(d,{ref:"menuRef"},{default:W(()=>[e.$slots.header?(w(),V("div",{key:0,class:E(e.nsSelect.be("dropdown","header")),onClick:H(()=>{},["stop"])},[F(e.$slots,"header")],10,["onClick"])):P("v-if",!0),ve(se(f,{id:e.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:E([e.nsSelect.is("empty",e.filteredOptionsCount===0)]),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical",onScroll:e.popupScroll},{default:W(()=>[e.showNewOption?(w(),U(a,{key:0,value:e.states.inputValue,created:!0},null,8,["value"])):P("v-if",!0),se(o,null,{default:W(()=>[F(e.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label","onScroll"]),[[De,e.states.options.size>0&&!e.loading]]),e.$slots.loading&&e.loading?(w(),V("div",{key:1,class:E(e.nsSelect.be("dropdown","loading"))},[F(e.$slots,"loading")],2)):e.loading||e.filteredOptionsCount===0?(w(),V("div",{key:2,class:E(e.nsSelect.be("dropdown","empty"))},[F(e.$slots,"empty",{},()=>[R("span",null,oe(e.emptyText),1)])],2)):P("v-if",!0),e.$slots.footer?(w(),V("div",{key:3,class:E(e.nsSelect.be("dropdown","footer")),onClick:H(()=>{},["stop"])},[F(e.$slots,"footer")],10,["onClick"])):P("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[v,e.handleClickOutside,e.popperRef]])}var Zl=ue(Jl,[["render",Xl],["__file","select.vue"]]);const xl=Z({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const t=_("select"),n=T(),s=Ce(),l=T([]);be(sn,ce(M({},Fe(e))));const a=k(()=>l.value.some(v=>v.visible===!0)),o=v=>{var u;return v.type.name==="ElOption"&&!!((u=v.component)!=null&&u.proxy)},f=v=>{const u=pe(v),p=[];return u.forEach(r=>{var c;Sl(r)&&(o(r)?p.push(r.component.proxy):G(r.children)&&r.children.length?p.push(...f(r.children)):(c=r.component)!=null&&c.subTree&&p.push(...f(r.component.subTree)))}),p},d=()=>{l.value=f(s.subTree)};return Te(()=>{d()}),nl(n,d,{attributes:!0,subtree:!0,childList:!0}),{groupRef:n,visible:a,ns:t}}});function _l(e,t,n,s,l,a){return ve((w(),V("ul",{ref:"groupRef",class:E(e.ns.be("group","wrap"))},[R("li",{class:E(e.ns.be("group","title"))},oe(e.label),3),R("li",null,[R("ul",{class:E(e.ns.b("group"))},[F(e.$slots,"default")],2)])],2)),[[De,e.visible]])}var an=ue(xl,[["render",_l],["__file","option-group.vue"]]);const ut=tt(Zl,{Option:bt,OptionGroup:an}),Qt=_t(bt);_t(an);const eo=yt({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:ll,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),to=Z({name:"ElText"}),no=Z(x(M({},to),{props:eo,setup(e){const t=e,n=T(),s=ln(),l=_("text"),a=k(()=>[l.b(),l.m(t.type),l.m(s.value),l.is("truncated",t.truncated),l.is("line-clamp",!ne(t.lineClamp))]),o=()=>{var f,d,v,u,p,r,c;if(wl().title)return;let m=!1;const C=((f=n.value)==null?void 0:f.textContent)||"";if(t.truncated){const N=(d=n.value)==null?void 0:d.offsetWidth,I=(v=n.value)==null?void 0:v.scrollWidth;N&&I&&I>N&&(m=!0)}else if(!ne(t.lineClamp)){const N=(u=n.value)==null?void 0:u.offsetHeight,I=(p=n.value)==null?void 0:p.scrollHeight;N&&I&&I>N&&(m=!0)}m?(r=n.value)==null||r.setAttribute("title",C):(c=n.value)==null||c.removeAttribute("title")};return Te(o),tn(o),(f,d)=>(w(),U(Pe(f.tag),{ref_key:"textRef",ref:n,class:E(Je(a)),style:we({"-webkit-line-clamp":f.lineClamp})},{default:W(()=>[F(f.$slots,"default")]),_:3},8,["class","style"]))}}));var lo=ue(no,[["__file","text.vue"]]);const oo=tt(lo),Oe="$treeNodeId",Jt=function(e,t){!t||t[Oe]||Object.defineProperty(t,Oe,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},Ct=(e,t)=>t==null?void 0:t[e||Oe],ft=(e,t,n)=>{const s=e.value.currentNode;n();const l=e.value.currentNode;s!==l&&t("current-change",l?l.data:null,l)},ht=e=>{let t=!0,n=!0,s=!0;for(let l=0,a=e.length;l<a;l++){const o=e[l];(o.checked!==!0||o.indeterminate)&&(t=!1,o.disabled||(s=!1)),(o.checked!==!1||o.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:s,half:!t&&!n}},Re=function(e){if(e.childNodes.length===0||e.loading)return;const{all:t,none:n,half:s}=ht(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):s?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const l=e.parent;!l||l.level===0||e.store.checkStrictly||Re(l)},Qe=function(e,t){const n=e.store.props,s=e.data||{},l=n[t];if(ie(l))return l(s,e);if(mt(l))return s[l];if(ne(l)){const a=s[t];return ne(a)?"":a}};let so=0;class me{constructor(t){this.id=so++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in t)dt(t,n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const n=t.props;if(n&&typeof n.isLeaf!="undefined"){const a=Qe(this,"isLeaf");ol(a)&&(this.isLeafByUser=a)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&!this.isLeafByUser&&this.expand(),G(this.data)||Jt(this,this.data),!this.data)return;const s=t.defaultExpandedKeys,l=t.key;l&&s&&s.includes(this.key)&&this.expand(null,t.autoExpandParent),l&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(t){G(t)||Jt(this,t),this.data=t,this.childNodes=[];let n;this.level===0&&G(this.data)?n=this.data:n=Qe(this,"children")||[];for(let s=0,l=n.length;s<l;s++)this.insertChild({data:n[s]})}get label(){return Qe(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return Qe(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return t.childNodes[n+1]}return null}get previousSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return n>0?t.childNodes[n-1]:null}return null}contains(t,n=!0){return(this.childNodes||[]).some(s=>s===t||n&&s.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,n,s){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof me)){if(!s){const l=this.getChildren(!0);l.includes(t.data)||(ne(n)||n<0?l.push(t.data):l.splice(n,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=ce(new me(t)),t instanceof me&&t.initialize()}t.level=this.level+1,ne(n)||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}insertBefore(t,n){let s;n&&(s=this.childNodes.indexOf(n)),this.insertChild(t,s)}insertAfter(t,n){let s;n&&(s=this.childNodes.indexOf(n),s!==-1&&(s+=1)),this.insertChild(t,s)}removeChild(t){const n=this.getChildren()||[],s=n.indexOf(t.data);s>-1&&n.splice(s,1);const l=this.childNodes.indexOf(t);l>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(l,1)),this.updateLeafState()}removeChildByData(t){let n=null;for(let s=0;s<this.childNodes.length;s++)if(this.childNodes[s].data===t){n=this.childNodes[s];break}n&&this.removeChild(n)}expand(t,n){const s=()=>{if(n){let l=this.parent;for(;l.level>0;)l.expanded=!0,l=l.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(l=>{l.canFocus=!0})};this.shouldLoadData()?this.loadData(l=>{G(l)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Re(this),s())}):s()}doCreateChildren(t,n={}){t.forEach(s=>{this.insertChild(Object.assign({data:s},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser!="undefined"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,n,s,l){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:o,allWithoutDisable:f}=ht(this.childNodes);!this.isLeaf&&!o&&f&&(this.checked=!1,t=!1);const d=()=>{if(n){const v=this.childNodes;for(let r=0,c=v.length;r<c;r++){const h=v[r];l=l||t!==!1;const m=h.disabled?h.checked:l;h.setChecked(m,n,!0,l)}const{half:u,all:p}=ht(v);p||(this.checked=p,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{d(),Re(this)},{checked:t!==!1});return}else d()}const a=this.parent;!a||a.level===0||s||Re(a)}getChildren(t=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const s=this.store.props;let l="children";return s&&(l=s.children||"children"),ne(n[l])&&(n[l]=null),t&&!n[l]&&(n[l]=[]),n[l]}updateChildren(){const t=this.getChildren()||[],n=this.childNodes.map(a=>a.data),s={},l=[];t.forEach((a,o)=>{const f=a[Oe];!!f&&n.findIndex(v=>v[Oe]===f)>=0?s[f]={index:o,data:a}:l.push({index:o,data:a})}),this.store.lazy||n.forEach(a=>{s[a[Oe]]||this.removeChildByData(a)}),l.forEach(({index:a,data:o})=>{this.insertChild({data:o},a)}),this.updateLeafState()}loadData(t,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const s=a=>{this.childNodes=[],this.doCreateChildren(a,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),t&&t.call(this,a)},l=()=>{this.loading=!1};this.store.load(this,s,l)}else t&&t.call(this)}eachNode(t){const n=[this];for(;n.length;){const s=n.shift();n.unshift(...s.childNodes),t(s)}}reInitChecked(){this.store.checkStrictly||Re(this)}}class ao{constructor(t){this.currentNode=null,this.currentNodeKey=null;for(const n in t)dt(t,n)&&(this[n]=t[n]);this.nodesMap={}}initialize(){if(this.root=new me({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const t=this.load;t(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(t){const n=this.filterNodeMethod,s=this.lazy,l=function(a){return Ft(this,null,function*(){const o=a.root?a.root.childNodes:a.childNodes;for(const[f,d]of o.entries())d.visible=n.call(d,t,d.data,d),f%80===0&&f>0&&(yield j()),yield l(d);if(!a.visible&&o.length){let f=!0;f=!o.some(d=>d.visible),a.root?a.root.visible=f===!1:a.visible=f===!1}t&&a.visible&&!a.isLeaf&&(!s||a.loaded)&&a.expand()})};l(this)}setData(t){t!==this.root.data?(this.nodesMap={},this.root.setData(t),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(t){if(t instanceof me)return t;const n=ae(t)?Ct(this.key,t):t;return this.nodesMap[n]||null}insertBefore(t,n){const s=this.getNode(n);s.parent.insertBefore({data:t},s)}insertAfter(t,n){const s=this.getNode(n);s.parent.insertAfter({data:t},s)}remove(t){const n=this.getNode(t);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(t,n){const s=Wt(n)?this.root:this.getNode(n);s&&s.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach(s=>{const l=n[s];l&&l.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){(this.defaultCheckedKeys||[]).includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const n=this.key;!t||!t.data||(n?t.key!==void 0&&(this.nodesMap[t.key]=t):this.nodesMap[t.id]=t)}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(s=>{this.deregisterNode(s)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,n=!1){const s=[],l=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(f=>{(f.checked||n&&f.indeterminate)&&(!t||t&&f.isLeaf)&&s.push(f.data),l(f)})};return l(this),s}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const t=[],n=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(a=>{a.indeterminate&&t.push(a.data),n(a)})};return n(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],n=this.nodesMap;for(const s in n)dt(n,s)&&t.push(n[s]);return t}updateChildren(t,n){const s=this.nodesMap[t];if(!s)return;const l=s.childNodes;for(let a=l.length-1;a>=0;a--){const o=l[a];this.remove(o.data)}for(let a=0,o=n.length;a<o;a++){const f=n[a];this.append(f,s.data)}}_setCheckedKeys(t,n=!1,s){const l=this._getAllNodes().sort((d,v)=>d.level-v.level),a=Object.create(null),o=Object.keys(s);l.forEach(d=>d.setChecked(!1,!1));const f=d=>{d.childNodes.forEach(v=>{var u;a[v.data[t]]=!0,(u=v.childNodes)!=null&&u.length&&f(v)})};for(let d=0,v=l.length;d<v;d++){const u=l[d],p=u.data[t].toString();if(!o.includes(p)){u.checked&&!a[p]&&u.setChecked(!1,!1);continue}if(u.childNodes.length&&f(u),u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),n){u.setChecked(!1,!1);const c=function(h){h.childNodes.forEach(C=>{C.isLeaf||C.setChecked(!1,!1),c(C)})};c(u)}}}setCheckedNodes(t,n=!1){const s=this.key,l={};t.forEach(a=>{l[(a||{})[s]]=!0}),this._setCheckedKeys(s,n,l)}setCheckedKeys(t,n=!1){this.defaultCheckedKeys=t;const s=this.key,l={};t.forEach(a=>{l[a]=!0}),this._setCheckedKeys(s,n,l)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(n=>{const s=this.getNode(n);s&&s.expand(null,this.autoExpandParent)})}setChecked(t,n,s){const l=this.getNode(t);l&&l.setChecked(!!n,s)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,n=!0){const s=t[this.key],l=this.nodesMap[s];this.setCurrentNode(l),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(t,n=!0){if(this.currentNodeKey=t,Wt(t)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const s=this.getNode(t);s&&(this.setCurrentNode(s),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const kt="RootTree",rn="NodeInstance",Xt="TreeNodeMap",io=Z({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=_("tree"),n=le(rn),s=le(kt);return()=>{const l=e.node,{data:a,store:o}=l;return e.renderContent?e.renderContent(ze,{_self:n,node:l,data:a,store:o}):F(s.ctx.slots,"default",{node:l,data:a},()=>[ze(oo,{tag:"span",truncated:!0,class:t.be("node","label")},()=>[l.label])])}}});var ro=ue(io,[["__file","tree-node-content.vue"]]);function dn(e){const t=le(Xt,null),n={treeNodeExpand:s=>{e.node!==s&&e.node.collapse()},children:[]};return t&&t.children.push(n),be(Xt,n),{broadcastExpanded:s=>{if(e.accordion)for(const l of n.children)l.treeNodeExpand(s)}}}const cn=Symbol("dragEvents");function co({props:e,ctx:t,el$:n,dropIndicator$:s,store:l}){const a=_("tree"),o=T({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return be(cn,{treeNodeDragStart:({event:u,treeNode:p})=>{if(ie(e.allowDrag)&&!e.allowDrag(p.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch(r){}o.value.draggingNode=p,t.emit("node-drag-start",p.node,u)},treeNodeDragOver:({event:u,treeNode:p})=>{const r=p,c=o.value.dropNode;c&&c.node.id!==r.node.id&&it(c.$el,a.is("drop-inner"));const h=o.value.draggingNode;if(!h||!r)return;let m=!0,C=!0,N=!0,I=!0;ie(e.allowDrop)&&(m=e.allowDrop(h.node,r.node,"prev"),I=C=e.allowDrop(h.node,r.node,"inner"),N=e.allowDrop(h.node,r.node,"next")),u.dataTransfer.dropEffect=C||m||N?"move":"none",(m||C||N)&&(c==null?void 0:c.node.id)!==r.node.id&&(c&&t.emit("node-drag-leave",h.node,c.node,u),t.emit("node-drag-enter",h.node,r.node,u)),m||C||N?o.value.dropNode=r:o.value.dropNode=null,r.node.nextSibling===h.node&&(N=!1),r.node.previousSibling===h.node&&(m=!1),r.node.contains(h.node,!1)&&(C=!1),(h.node===r.node||h.node.contains(r.node))&&(m=!1,C=!1,N=!1);const $=r.$el.querySelector(`.${a.be("node","content")}`).getBoundingClientRect(),O=n.value.getBoundingClientRect();let B;const re=m?C?.25:N?.45:1:-1,q=N?C?.75:m?.55:0:1;let fe=-9999;const y=u.clientY-$.top;y<$.height*re?B="before":y>$.height*q?B="after":C?B="inner":B="none";const K=r.$el.querySelector(`.${a.be("node","expand-icon")}`).getBoundingClientRect(),z=s.value;B==="before"?fe=K.top-O.top:B==="after"&&(fe=K.bottom-O.top),z.style.top=`${fe}px`,z.style.left=`${K.right-O.left}px`,B==="inner"?sl(r.$el,a.is("drop-inner")):it(r.$el,a.is("drop-inner")),o.value.showDropIndicator=B==="before"||B==="after",o.value.allowDrop=o.value.showDropIndicator||I,o.value.dropType=B,t.emit("node-drag-over",h.node,r.node,u)},treeNodeDragEnd:u=>{const{draggingNode:p,dropType:r,dropNode:c}=o.value;if(u.preventDefault(),u.dataTransfer&&(u.dataTransfer.dropEffect="move"),p&&c){const h={data:p.node.data};r!=="none"&&p.node.remove(),r==="before"?c.node.parent.insertBefore(h,c.node):r==="after"?c.node.parent.insertAfter(h,c.node):r==="inner"&&c.node.insertChild(h),r!=="none"&&(l.value.registerNode(h),l.value.key&&p.node.eachNode(m=>{var C;(C=l.value.nodesMap[m.data[l.value.key]])==null||C.setChecked(m.checked,!l.value.checkStrictly)})),it(c.$el,a.is("drop-inner")),t.emit("node-drag-end",p.node,c.node,r,u),r!=="none"&&t.emit("node-drop",p.node,c.node,r,u)}p&&!c&&t.emit("node-drag-end",p.node,null,r,u),o.value.showDropIndicator=!1,o.value.draggingNode=null,o.value.dropNode=null,o.value.allowDrop=!0}}),{dragState:o}}const uo=Z({name:"ElTreeNode",components:{ElCollapseTransition:Kl,ElCheckbox:Rl,NodeContent:ro,ElIcon:xt,Loading:al},props:{node:{type:me,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const n=_("tree"),{broadcastExpanded:s}=dn(e),l=le(kt),a=T(!1),o=T(!1),f=T(),d=T(),v=T(),u=le(cn),p=Ce();be(rn,p),e.node.expanded&&(a.value=!0,o.value=!0);const r=l.props.props.children||"children";L(()=>{var y;const K=(y=e.node.data)==null?void 0:y[r];return K&&[...K]},()=>{e.node.updateChildren()}),L(()=>e.node.indeterminate,y=>{m(e.node.checked,y)}),L(()=>e.node.checked,y=>{m(y,e.node.indeterminate)}),L(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),L(()=>e.node.expanded,y=>{j(()=>a.value=y),y&&(o.value=!0)});const c=y=>Ct(l.props.nodeKey,y.data),h=y=>{const K=e.props.class;if(!K)return{};let z;if(ie(K)){const{data:Y}=y;z=K(Y,y)}else z=K;return mt(z)?{[z]:!0}:z},m=(y,K)=>{(f.value!==y||d.value!==K)&&l.ctx.emit("check-change",e.node.data,y,K),f.value=y,d.value=K},C=y=>{ft(l.store,l.ctx.emit,()=>{var K;if((K=l==null?void 0:l.props)==null?void 0:K.nodeKey){const Y=c(e.node);l.store.value.setCurrentNodeKey(Y)}else l.store.value.setCurrentNode(e.node)}),l.currentNode.value=e.node,l.props.expandOnClickNode&&I(),(l.props.checkOnClickNode||e.node.isLeaf&&l.props.checkOnClickLeaf&&e.showCheckbox)&&!e.node.disabled&&$(!e.node.checked),l.ctx.emit("node-click",e.node.data,e.node,p,y)},N=y=>{var K;(K=l.instance.vnode.props)!=null&&K.onNodeContextmenu&&(y.stopPropagation(),y.preventDefault()),l.ctx.emit("node-contextmenu",y,e.node.data,e.node,p)},I=()=>{e.node.isLeaf||(a.value?(l.ctx.emit("node-collapse",e.node.data,e.node,p),e.node.collapse()):e.node.expand(()=>{t.emit("node-expand",e.node.data,e.node,p)}))},$=y=>{e.node.setChecked(y,!(l!=null&&l.props.checkStrictly)),j(()=>{const K=l.store.value;l.ctx.emit("check",e.node.data,{checkedNodes:K.getCheckedNodes(),checkedKeys:K.getCheckedKeys(),halfCheckedNodes:K.getHalfCheckedNodes(),halfCheckedKeys:K.getHalfCheckedKeys()})})};return{ns:n,node$:v,tree:l,expanded:a,childNodeRendered:o,oldChecked:f,oldIndeterminate:d,getNodeKey:c,getNodeClass:h,handleSelectChange:m,handleClick:C,handleContextMenu:N,handleExpandIconClick:I,handleCheckChange:$,handleChildNodeExpand:(y,K,z)=>{s(K),l.ctx.emit("node-expand",y,K,z)},handleDragStart:y=>{l.props.draggable&&u.treeNodeDragStart({event:y,treeNode:e})},handleDragOver:y=>{y.preventDefault(),l.props.draggable&&u.treeNodeDragOver({event:y,treeNode:{$el:v.value,node:e.node}})},handleDrop:y=>{y.preventDefault()},handleDragEnd:y=>{l.props.draggable&&u.treeNodeDragEnd(y)},CaretRight:il}}});function fo(e,t,n,s,l,a){const o=J("el-icon"),f=J("el-checkbox"),d=J("loading"),v=J("node-content"),u=J("el-tree-node"),p=J("el-collapse-transition");return ve((w(),V("div",{ref:"node$",class:E([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:H(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:H(e.handleDragStart,["stop"]),onDragover:H(e.handleDragOver,["stop"]),onDragend:H(e.handleDragEnd,["stop"]),onDrop:H(e.handleDrop,["stop"])},[R("div",{class:E(e.ns.be("node","content")),style:we({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(w(),U(o,{key:0,class:E([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:H(e.handleExpandIconClick,["stop"])},{default:W(()=>[(w(),U(Pe(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):P("v-if",!0),e.showCheckbox?(w(),U(f,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:H(()=>{},["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):P("v-if",!0),e.node.loading?(w(),U(o,{key:2,class:E([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:W(()=>[se(d)]),_:1},8,["class"])):P("v-if",!0),se(v,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),se(p,null,{default:W(()=>[!e.renderAfterExpand||e.childNodeRendered?ve((w(),V("div",{key:0,class:E(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded,onClick:H(()=>{},["stop"])},[(w(!0),V(xe,null,_e(e.node.childNodes,r=>(w(),U(u,{key:e.getNodeKey(r),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:r,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[De,e.expanded]]):P("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[De,e.node.visible]])}var ho=ue(uo,[["render",fo],["__file","tree-node.vue"]]);function po({el$:e},t){const n=_("tree");Te(()=>{l()}),tn(()=>{Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(o=>{o.setAttribute("tabindex","-1")})}),rl(e,"keydown",a=>{const o=a.target;if(!o.className.includes(n.b("node")))return;const f=a.code,d=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),v=d.indexOf(o);let u;if([de.up,de.down].includes(f)){if(a.preventDefault(),f===de.up){u=v===-1?0:v!==0?v-1:d.length-1;const r=u;for(;!t.value.getNode(d[u].dataset.key).canFocus;){if(u--,u===r){u=-1;break}u<0&&(u=d.length-1)}}else{u=v===-1?0:v<d.length-1?v+1:0;const r=u;for(;!t.value.getNode(d[u].dataset.key).canFocus;){if(u++,u===r){u=-1;break}u>=d.length&&(u=0)}}u!==-1&&d[u].focus()}[de.left,de.right].includes(f)&&(a.preventDefault(),o.click());const p=o.querySelector('[type="checkbox"]');[de.enter,de.numpadEnter,de.space].includes(f)&&p&&(a.preventDefault(),p.click())});const l=()=>{var a;const o=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(v=>{v.setAttribute("tabindex","-1")});const d=e.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(d.length){d[0].setAttribute("tabindex","0");return}(a=o[0])==null||a.setAttribute("tabindex","0")}}const vo=Z({name:"ElTree",components:{ElTreeNode:ho},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:rt}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:n}=Zt(),s=_("tree"),l=le(Ie,null),a=T(new ao({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));a.value.initialize();const o=T(a.value.root),f=T(null),d=T(null),v=T(null),{broadcastExpanded:u}=dn(e),{dragState:p}=co({props:e,ctx:t,el$:d,dropIndicator$:v,store:a});po({el$:d},a);const r=k(()=>{const{childNodes:b}=o.value,D=l?l.hasFilteredOptions!==0:!1;return(!b||b.length===0||b.every(({visible:ee})=>!ee))&&!D});L(()=>e.currentNodeKey,b=>{a.value.setCurrentNodeKey(b)}),L(()=>e.defaultCheckedKeys,b=>{a.value.setDefaultCheckedKey(b)}),L(()=>e.defaultExpandedKeys,b=>{a.value.setDefaultExpandedKeys(b)}),L(()=>e.data,b=>{a.value.setData(b)},{deep:!0}),L(()=>e.checkStrictly,b=>{a.value.checkStrictly=b});const c=b=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");a.value.filter(b)},h=b=>Ct(e.nodeKey,b.data),m=b=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const D=a.value.getNode(b);if(!D)return[];const ee=[D.data];let ye=D.parent;for(;ye&&ye!==o.value;)ee.push(ye.data),ye=ye.parent;return ee.reverse()},C=(b,D)=>a.value.getCheckedNodes(b,D),N=b=>a.value.getCheckedKeys(b),I=()=>{const b=a.value.getCurrentNode();return b?b.data:null},$=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const b=I();return b?b[e.nodeKey]:null},O=(b,D)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");a.value.setCheckedNodes(b,D)},B=(b,D)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");a.value.setCheckedKeys(b,D)},re=(b,D,ee)=>{a.value.setChecked(b,D,ee)},q=()=>a.value.getHalfCheckedNodes(),fe=()=>a.value.getHalfCheckedKeys(),y=(b,D=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");ft(a,t.emit,()=>{u(b),a.value.setUserCurrentNode(b,D)})},K=(b,D=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");ft(a,t.emit,()=>{u(),a.value.setCurrentNodeKey(b,D)})},z=b=>a.value.getNode(b),Y=b=>{a.value.remove(b)},nt=(b,D)=>{a.value.append(b,D)},lt=(b,D)=>{a.value.insertBefore(b,D)},ot=(b,D)=>{a.value.insertAfter(b,D)},ge=(b,D,ee)=>{u(D),t.emit("node-expand",b,D,ee)},Ve=(b,D)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");a.value.updateChildren(b,D)};return be(kt,{ctx:t,props:e,store:a,root:o,currentNode:f,instance:Ce()}),be(Vl,void 0),{ns:s,store:a,root:o,currentNode:f,dragState:p,el$:d,dropIndicator$:v,isEmpty:r,filter:c,getNodeKey:h,getNodePath:m,getCheckedNodes:C,getCheckedKeys:N,getCurrentNode:I,getCurrentKey:$,setCheckedNodes:O,setCheckedKeys:B,setChecked:re,getHalfCheckedNodes:q,getHalfCheckedKeys:fe,setCurrentNode:y,setCurrentKey:K,t:n,getNode:z,remove:Y,append:nt,insertBefore:lt,insertAfter:ot,handleNodeExpand:ge,updateKeyChildren:Ve}}});function go(e,t,n,s,l,a){const o=J("el-tree-node");return w(),V("div",{ref:"el$",class:E([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(w(!0),V(xe,null,_e(e.root.childNodes,f=>(w(),U(o,{key:e.getNodeKey(f),node:f,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(w(),V("div",{key:0,class:E(e.ns.e("empty-block"))},[F(e.$slots,"empty",{},()=>{var f;return[R("span",{class:E(e.ns.e("empty-text"))},oe((f=e.emptyText)!=null?f:e.t("el.tree.emptyText")),3)]})],2)):P("v-if",!0),ve(R("div",{ref:"dropIndicator$",class:E(e.ns.e("drop-indicator"))},null,2),[[De,e.dragState.showDropIndicator]])],2)}var yo=ue(vo,[["render",go],["__file","tree.vue"]]);const pt=tt(yo),mo=(e,{attrs:t,emit:n},{select:s,tree:l,key:a})=>{const o=_("tree-select");return L(()=>e.data,()=>{e.filterable&&j(()=>{var d,v;(v=l.value)==null||v.filter((d=s.value)==null?void 0:d.states.inputValue)})},{flush:"post"}),x(M(M({},et(Fe(e),Object.keys(ut.props))),t),{class:k(()=>t.class),style:k(()=>t.style),"onUpdate:modelValue":d=>n(te,d),valueKey:a,popperClass:k(()=>{const d=[o.e("popper")];return e.popperClass&&d.push(e.popperClass),d.join(" ")}),filterMethod:(d="")=>{var v;e.filterMethod?e.filterMethod(d):e.remoteMethod?e.remoteMethod(d):(v=l.value)==null||v.filter(d)}})},bo=Z({extends:Qt,setup(e,t){const n=Qt.setup(e,t);delete n.selectOptionClick;const s=Ce().proxy;return j(()=>{n.select.states.cachedOptions.get(s.value)||n.select.onOptionCreate(s)}),L(()=>t.attrs.visible,l=>{j(()=>{n.states.visible=l})},{immediate:!0}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function vt(e){return e||e===0}function Nt(e){return G(e)&&e.length}function Ne(e){return G(e)?e:vt(e)?[e]:[]}function Xe(e,t,n,s,l){for(let a=0;a<e.length;a++){const o=e[a];if(t(o,a,e,l))return s?s(o,a,e,l):o;{const f=n(o);if(Nt(f)){const d=Xe(f,t,n,s,o);if(d)return d}}}}function Ze(e,t,n,s){for(let l=0;l<e.length;l++){const a=e[l];t(a,l,e,s);const o=n(a);Nt(o)&&Ze(o,t,n,a)}}const Co=(e,{attrs:t,slots:n,emit:s},{select:l,tree:a,key:o})=>{L([()=>e.modelValue,a],()=>{e.showCheckbox&&j(()=>{const r=a.value;r&&!Ke(r.getCheckedKeys(),Ne(e.modelValue))&&r.setCheckedKeys(Ne(e.modelValue))})},{immediate:!0,deep:!0});const f=k(()=>M({value:o.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf"},e.props)),d=(r,c)=>{var h;const m=f.value[r];return ie(m)?m(c,(h=a.value)==null?void 0:h.getNode(d("value",c))):c[m]},v=Ne(e.modelValue).map(r=>Xe(e.data||[],c=>d("value",c)===r,c=>d("children",c),(c,h,m,C)=>C&&d("value",C))).filter(r=>vt(r)),u=k(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const r=[];return Ze(e.data.concat(e.cacheData),c=>{const h=d("value",c);r.push({value:h,currentLabel:d("label",c),isDisabled:d("disabled",c)})},c=>d("children",c)),r}),p=()=>{var r;return(r=a.value)==null?void 0:r.getCheckedKeys().filter(c=>{var h;const m=(h=a.value)==null?void 0:h.getNode(c);return!cl(m)&&dl(m.childNodes)})};return x(M(M({},et(Fe(e),Object.keys(pt.props))),t),{nodeKey:o,expandOnClickNode:k(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:k(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(v):v),renderContent:(r,{node:c,data:h,store:m})=>r(bo,{value:d("value",h),label:d("label",h),disabled:d("disabled",h),visible:c.visible},e.renderContent?()=>e.renderContent(r,{node:c,data:h,store:m}):n.default?()=>n.default({node:c,data:h,store:m}):void 0),filterNodeMethod:(r,c,h)=>e.filterNodeMethod?e.filterNodeMethod(r,c,h):r?new RegExp(en(r),"i").test(d("label",c)||""):!0,onNodeClick:(r,c,h)=>{var m,C,N,I;if((m=t.onNodeClick)==null||m.call(t,r,c,h),!(e.showCheckbox&&e.checkOnClickNode)){if(!e.showCheckbox&&(e.checkStrictly||c.isLeaf)){if(!d("disabled",r)){const $=(C=l.value)==null?void 0:C.states.options.get(d("value",r));(N=l.value)==null||N.handleOptionSelect($)}}else e.expandOnClickNode&&h.proxy.handleExpandIconClick();(I=l.value)==null||I.focus()}},onCheck:(r,c)=>{var h;if(!e.showCheckbox)return;const m=d("value",r),C={};Ze([a.value.store.root],O=>C[O.key]=O,O=>O.childNodes);const N=c.checkedKeys,I=e.multiple?Ne(e.modelValue).filter(O=>!(O in C)&&!N.includes(O)):[],$=I.concat(N);if(e.checkStrictly)s(te,e.multiple?$:$.includes(m)?m:void 0);else if(e.multiple){const O=p();s(te,I.concat(O))}else{const O=Xe([r],q=>!Nt(d("children",q))&&!d("disabled",q),q=>d("children",q)),B=O?d("value",O):void 0,re=vt(e.modelValue)&&!!Xe([r],q=>d("value",q)===e.modelValue,q=>d("children",q));s(te,B===e.modelValue||re?void 0:B)}j(()=>{var O;const B=Ne(e.modelValue);a.value.setCheckedKeys(B),(O=t.onCheck)==null||O.call(t,r,{checkedKeys:a.value.getCheckedKeys(),checkedNodes:a.value.getCheckedNodes(),halfCheckedKeys:a.value.getHalfCheckedKeys(),halfCheckedNodes:a.value.getHalfCheckedNodes()})}),(h=l.value)==null||h.focus()},onNodeExpand:(r,c,h)=>{var m;(m=t.onNodeExpand)==null||m.call(t,r,c,h),j(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&c.checked){const C={},N=a.value.getCheckedKeys();Ze([a.value.store.root],O=>C[O.key]=O,O=>O.childNodes);const I=Ne(e.modelValue).filter(O=>!(O in C)&&!N.includes(O)),$=p();s(te,I.concat($))}})},cacheOptions:u})};var ko=Z({props:{data:{type:Array,default:()=>[]}},setup(e){const t=le(Ie);return L(()=>e.data,()=>{var n;e.data.forEach(l=>{t.states.cachedOptions.has(l.value)||t.states.cachedOptions.set(l.value,l)});const s=((n=t.selectRef)==null?void 0:n.querySelectorAll("input"))||[];gt&&!Array.from(s).includes(document.activeElement)&&t.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const No=Z({name:"ElTreeSelect",inheritAttrs:!1,props:x(M(M({},ut.props),pt.props),{cacheData:{type:Array,default:()=>[]}}),setup(e,t){const{slots:n,expose:s}=t,l=T(),a=T(),o=k(()=>e.nodeKey||e.valueKey||"value"),f=mo(e,t,{select:l,tree:a,key:o}),p=Co(e,t,{select:l,tree:a,key:o}),{cacheOptions:d}=p,v=zt(p,["cacheOptions"]),u=ce({});return s(u),Te(()=>{Object.assign(u,M(M({},et(a.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"])),et(l.value,["focus","blur","selectedLabel"])))}),()=>ze(ut,ce(x(M({},f),{ref:r=>l.value=r})),x(M({},n),{default:()=>[ze(ko,{data:d.value}),ze(pt,ce(x(M({},v),{ref:r=>a.value=r})))]}))}});var Eo=ue(No,[["__file","tree-select.vue"]]);const qo=tt(Eo);export{qo as ElTreeSelect,qo as default};
