import{C as v}from"./bootstrap-CRjMKuhV.js";import{b as g}from"./use-form-common-props-CqlcxXsB.js";import{i as F}from"./aria-DGfENwCE.js";import{l as x,s as w,r as h,w as A,a as C,U as E}from"../jse/index-index-D0E-L6PM.js";function U(l,{beforeFocus:n,afterFocus:a,beforeBlur:c,afterBlur:i}={}){const r=x(),{emit:m}=r,o=w(),u=g(),e=h(!1),d=t=>{C(n)&&n(t)||e.value||(e.value=!0,m("focus",t),a==null||a())},f=t=>{var s;C(c)&&c(t)||t.relatedTarget&&((s=o.value)!=null&&s.contains(t.relatedTarget))||(e.value=!1,m("blur",t),i==null||i())},b=t=>{var s,p;(s=o.value)!=null&&s.contains(document.activeElement)&&o.value!==document.activeElement||F(t.target)||u.value||(p=l.value)==null||p.focus()};return A([o,u],([t,s])=>{t&&(s?t.removeAttribute("tabindex"):t.setAttribute("tabindex","-1"))}),v(o,"focus",d,!0),v(o,"blur",f,!0),v(o,"click",b,!0),{isFocused:e,wrapperRef:o,handleFocus:d,handleBlur:f}}const _=l=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(l);function y({afterComposition:l,emit:n}){const a=h(!1),c=o=>{n==null||n("compositionstart",o),a.value=!0},i=o=>{var u;n==null||n("compositionupdate",o);const e=(u=o.target)==null?void 0:u.value,d=e[e.length-1]||"";a.value=!_(d)},r=o=>{n==null||n("compositionend",o),a.value&&(a.value=!1,E(()=>l(o)))};return{isComposing:a,handleComposition:o=>{o.type==="compositionend"?r(o):i(o)},handleCompositionStart:c,handleCompositionUpdate:i,handleCompositionEnd:r}}export{y as a,U as u};
