var Qe=Object.defineProperty,et=Object.defineProperties;var tt=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var ot=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable;var Ce=(o,s,n)=>s in o?Qe(o,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[s]=n,_=(o,s)=>{for(var n in s||(s={}))ot.call(s,n)&&Ce(o,n,s[n]);if(we)for(var n of we(s))at.call(s,n)&&Ce(o,n,s[n]);return o},Se=(o,s)=>et(o,tt(s));var ee=(o,s,n)=>new Promise((a,u)=>{var d=r=>{try{i(n.next(r))}catch(v){u(v)}},c=r=>{try{i(n.throw(r))}catch(v){u(v)}},i=r=>r.done?a(r.value):Promise.resolve(r.value).then(d,c);i((n=n.apply(o,s)).next())});import{F as Le,i as Ee,d as nt,m as st,e as te,k as Ie,r as lt,G as it,H as oe,h as rt,f as ke,V as ut,I as ct,J as dt,q as pt,K as ft,E as R,L as vt,w as mt,n as ht,M as gt}from"./bootstrap-atv0L1PC.js";import{U as se,b as yt,a as bt,c as xt,d as Fe,I as Pe,C as ze}from"./index-BFHI44jr.js";import{a as ae,J as g,q as Re,a5 as Y,P as O,Y as q,i as Ne,n as V,a4 as Ae,al as wt,ak as Ct,a6 as St,_ as Et,ao as C,ar as h,ap as b,F as ne,aD as T,aq as x,ah as t,aB as U,aJ as E,aE as A,aK as j,aC as Te,x as It,aA as kt,aI as W,aG as Ve,o as Me}from"../jse/index-index-CJFR8bbq.js";import{a as Oe,u as Ft}from"./use-form-common-props-6pqroxBi.js";import{i as Pt}from"./el-button-Bn5vgylP.js";const zt=()=>Le&&/firefox/i.test(window.navigator.userAgent);let w;const Nt={height:"0",visibility:"hidden",overflow:zt()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Tt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Vt(o){const s=window.getComputedStyle(o),n=s.getPropertyValue("box-sizing"),a=Number.parseFloat(s.getPropertyValue("padding-bottom"))+Number.parseFloat(s.getPropertyValue("padding-top")),u=Number.parseFloat(s.getPropertyValue("border-bottom-width"))+Number.parseFloat(s.getPropertyValue("border-top-width"));return{contextStyle:Tt.map(c=>[c,s.getPropertyValue(c)]),paddingSize:a,borderSize:u,boxSizing:n}}function Be(o,s=1,n){var a;w||(w=document.createElement("textarea"),document.body.appendChild(w));const{paddingSize:u,borderSize:d,boxSizing:c,contextStyle:i}=Vt(o);i.forEach(([y,I])=>w==null?void 0:w.style.setProperty(y,I)),Object.entries(Nt).forEach(([y,I])=>w==null?void 0:w.style.setProperty(y,I,"important")),w.value=o.value||o.placeholder||"";let r=w.scrollHeight;const v={};c==="border-box"?r=r+d:c==="content-box"&&(r=r-u),w.value="";const m=w.scrollHeight-u;if(Ee(s)){let y=m*s;c==="border-box"&&(y=y+u+d),r=Math.max(y,r),v.minHeight=`${y}px`}if(Ee(n)){let y=m*n;c==="border-box"&&(y=y+u+d),r=Math.min(y,r)}return v.height=`${r}px`,(a=w.parentNode)==null||a.removeChild(w),w=void 0,v}const Mt=nt(_({id:{type:String,default:void 0},size:lt,disabled:Boolean,modelValue:{type:te([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:te([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Ie},prefixIcon:{type:Ie},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:te([Object,Array,String]),default:()=>st({})},autofocus:Boolean,rows:{type:Number,default:2}},yt(["ariaLabel"]))),Bt={[se]:o=>ae(o),input:o=>ae(o),change:o=>ae(o),focus:o=>o instanceof FocusEvent,blur:o=>o instanceof FocusEvent,clear:()=>!0,mouseleave:o=>o instanceof MouseEvent,mouseenter:o=>o instanceof MouseEvent,keydown:o=>o instanceof Event,compositionstart:o=>o instanceof CompositionEvent,compositionupdate:o=>o instanceof CompositionEvent,compositionend:o=>o instanceof CompositionEvent},Lt=["class","style"],Rt=/^on[A-Z]/,At=(o={})=>{const{excludeListeners:s=!1,excludeKeys:n}=o,a=g(()=>((n==null?void 0:n.value)||[]).concat(Lt)),u=Re();return u?g(()=>{var d;return it(Object.entries((d=u.proxy)==null?void 0:d.$attrs).filter(([c])=>!a.value.includes(c)&&!(s&&Rt.test(c))))}):g(()=>({}))};function Ot(o,{beforeFocus:s,afterFocus:n,beforeBlur:a,afterBlur:u}={}){const d=Re(),{emit:c}=d,i=Y(),r=Oe(),v=O(!1),m=f=>{Ne(s)&&s(f)||v.value||(v.value=!0,c("focus",f),n==null||n())},y=f=>{var l;Ne(a)&&a(f)||f.relatedTarget&&((l=i.value)!=null&&l.contains(f.relatedTarget))||(v.value=!1,c("blur",f),u==null||u())},I=f=>{var l,F;(l=i.value)!=null&&l.contains(document.activeElement)&&i.value!==document.activeElement||Pt(f.target)||r.value||(F=o.value)==null||F.focus()};return q([i,r],([f,l])=>{f&&(l?f.removeAttribute("tabindex"):f.setAttribute("tabindex","-1"))}),oe(i,"focus",m,!0),oe(i,"blur",y,!0),oe(i,"click",I,!0),{isFocused:v,wrapperRef:i,handleFocus:m,handleBlur:y}}const Ht=o=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(o);function $t({afterComposition:o,emit:s}){const n=O(!1),a=i=>{s==null||s("compositionstart",i),n.value=!0},u=i=>{var r;s==null||s("compositionupdate",i);const v=(r=i.target)==null?void 0:r.value,m=v[v.length-1]||"";n.value=!Ht(m)},d=i=>{s==null||s("compositionend",i),n.value&&(n.value=!1,V(()=>o(i)))};return{isComposing:n,handleComposition:i=>{i.type==="compositionend"?d(i):u(i)},handleCompositionStart:a,handleCompositionUpdate:u,handleCompositionEnd:d}}function Dt(o){let s;function n(){if(o.value==null)return;const{selectionStart:u,selectionEnd:d,value:c}=o.value;if(u==null||d==null)return;const i=c.slice(0,Math.max(0,u)),r=c.slice(Math.max(0,d));s={selectionStart:u,selectionEnd:d,value:c,beforeTxt:i,afterTxt:r}}function a(){if(o.value==null||s==null)return;const{value:u}=o.value,{beforeTxt:d,afterTxt:c,selectionStart:i}=s;if(d==null||c==null||i==null)return;let r=u.length;if(u.endsWith(c))r=u.length-c.length;else if(u.startsWith(d))r=d.length;else{const v=d[i-1],m=u.indexOf(v,i-1);m!==-1&&(r=m+1)}o.value.setSelectionRange(r,r)}return[n,a]}const Kt="ElInput",_t=Ae({name:Kt,inheritAttrs:!1}),Ut=Ae(Se(_({},_t),{props:Mt,emits:Bt,setup(o,{expose:s,emit:n}){const a=o,u=wt(),d=At(),c=Ct(),i=g(()=>[a.type==="textarea"?F.b():l.b(),l.m(I.value),l.is("disabled",f.value),l.is("exceed",Ue.value),{[l.b("group")]:c.prepend||c.append,[l.m("prefix")]:c.prefix||a.prefixIcon,[l.m("suffix")]:c.suffix||a.suffixIcon||a.clearable||a.showPassword,[l.bm("suffix","password-clear")]:K.value&&X.value,[l.b("hidden")]:a.type==="hidden"},u.class]),r=g(()=>[l.e("wrapper"),l.is("focus",J.value)]),{form:v,formItem:m}=bt(),{inputId:y}=xt(a,{formItemContext:m}),I=Ft(),f=Oe(),l=ke("input"),F=ke("textarea"),H=Y(),S=Y(),G=O(!1),$=O(!1),le=O(),D=Y(a.inputStyle),P=g(()=>H.value||S.value),{wrapperRef:He,isFocused:J,handleFocus:$e,handleBlur:De}=Ot(P,{beforeFocus(){return f.value},afterBlur(){var e;a.validateEvent&&((e=m==null?void 0:m.validate)==null||e.call(m,"blur").catch(p=>Fe()))}}),ie=g(()=>{var e;return(e=v==null?void 0:v.statusIcon)!=null?e:!1}),M=g(()=>(m==null?void 0:m.validateState)||""),re=g(()=>M.value&&ut[M.value]),Ke=g(()=>$.value?ct:dt),_e=g(()=>[u.style]),ue=g(()=>[a.inputStyle,D.value,{resize:a.resize}]),k=g(()=>pt(a.modelValue)?"":String(a.modelValue)),K=g(()=>a.clearable&&!f.value&&!a.readonly&&!!k.value&&(J.value||G.value)),X=g(()=>a.showPassword&&!f.value&&!!k.value),z=g(()=>a.showWordLimit&&!!a.maxlength&&(a.type==="text"||a.type==="textarea")&&!f.value&&!a.readonly&&!a.showPassword),Z=g(()=>k.value.length),Ue=g(()=>!!z.value&&Z.value>Number(a.maxlength)),je=g(()=>!!c.suffix||!!a.suffixIcon||K.value||a.showPassword||z.value||!!M.value&&ie.value),[ce,de]=Dt(H);ft(S,e=>{if(We(),!z.value||a.resize!=="both")return;const p=e[0],{width:N}=p.contentRect;le.value={right:`calc(100% - ${N+15+6}px)`}});const B=()=>{const{type:e,autosize:p}=a;if(!(!Le||e!=="textarea"||!S.value))if(p){const N=Me(p)?p.minRows:void 0,be=Me(p)?p.maxRows:void 0,xe=Be(S.value,N,be);D.value=_({overflowY:"hidden"},xe),V(()=>{S.value.offsetHeight,D.value=xe})}else D.value={minHeight:Be(S.value).minHeight}},We=(e=>{let p=!1;return()=>{var N;if(p||!a.autosize)return;((N=S.value)==null?void 0:N.offsetParent)===null||(e(),p=!0)}})(B),L=()=>{const e=P.value,p=a.formatter?a.formatter(k.value):k.value;!e||e.value===p||(e.value=p)},Q=e=>ee(null,null,function*(){ce();let{value:p}=e.target;if(a.formatter&&a.parser&&(p=a.parser(p)),!fe.value){if(p===k.value){L();return}n(se,p),n(Pe,p),yield V(),L(),de()}}),pe=e=>{let{value:p}=e.target;a.formatter&&a.parser&&(p=a.parser(p)),n(ze,p)},{isComposing:fe,handleCompositionStart:ve,handleCompositionUpdate:me,handleCompositionEnd:he}=$t({emit:n,afterComposition:Q}),Ye=()=>{ce(),$.value=!$.value,setTimeout(de)},qe=()=>{var e;return(e=P.value)==null?void 0:e.focus()},Ge=()=>{var e;return(e=P.value)==null?void 0:e.blur()},Je=e=>{G.value=!1,n("mouseleave",e)},Xe=e=>{G.value=!0,n("mouseenter",e)},ge=e=>{n("keydown",e)},Ze=()=>{var e;(e=P.value)==null||e.select()},ye=()=>{n(se,""),n(ze,""),n("clear"),n(Pe,"")};return q(()=>a.modelValue,()=>{var e;V(()=>B()),a.validateEvent&&((e=m==null?void 0:m.validate)==null||e.call(m,"change").catch(p=>Fe()))}),q(k,()=>L()),q(()=>a.type,()=>ee(null,null,function*(){yield V(),L(),B()})),St(()=>{!a.formatter&&a.parser,L(),V(B)}),s({input:H,textarea:S,ref:P,textareaStyle:ue,autosize:Et(a,"autosize"),isComposing:fe,focus:qe,blur:Ge,select:Ze,clear:ye,resizeTextarea:B}),(e,p)=>(h(),C("div",{class:x([t(i),{[t(l).bm("group","append")]:e.$slots.append,[t(l).bm("group","prepend")]:e.$slots.prepend}]),style:Ve(t(_e)),onMouseenter:Xe,onMouseleave:Je},[b(" input "),e.type!=="textarea"?(h(),C(ne,{key:0},[b(" prepend slot "),e.$slots.prepend?(h(),C("div",{key:0,class:x(t(l).be("group","prepend"))},[U(e.$slots,"prepend")],2)):b("v-if",!0),T("div",{ref_key:"wrapperRef",ref:He,class:x(t(r))},[b(" prefix slot "),e.$slots.prefix||e.prefixIcon?(h(),C("span",{key:0,class:x(t(l).e("prefix"))},[T("span",{class:x(t(l).e("prefix-inner"))},[U(e.$slots,"prefix"),e.prefixIcon?(h(),E(t(R),{key:0,class:x(t(l).e("icon"))},{default:A(()=>[(h(),E(j(e.prefixIcon)))]),_:1},8,["class"])):b("v-if",!0)],2)],2)):b("v-if",!0),T("input",Te({id:t(y),ref_key:"input",ref:H,class:t(l).e("inner")},t(d),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?$.value?"text":"password":e.type,disabled:t(f),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,onCompositionstart:t(ve),onCompositionupdate:t(me),onCompositionend:t(he),onInput:Q,onChange:pe,onKeydown:ge}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),b(" suffix slot "),t(je)?(h(),C("span",{key:1,class:x(t(l).e("suffix"))},[T("span",{class:x(t(l).e("suffix-inner"))},[!t(K)||!t(X)||!t(z)?(h(),C(ne,{key:0},[U(e.$slots,"suffix"),e.suffixIcon?(h(),E(t(R),{key:0,class:x(t(l).e("icon"))},{default:A(()=>[(h(),E(j(e.suffixIcon)))]),_:1},8,["class"])):b("v-if",!0)],64)):b("v-if",!0),t(K)?(h(),E(t(R),{key:1,class:x([t(l).e("icon"),t(l).e("clear")]),onMousedown:mt(t(kt),["prevent"]),onClick:ye},{default:A(()=>[It(t(vt))]),_:1},8,["class","onMousedown"])):b("v-if",!0),t(X)?(h(),E(t(R),{key:2,class:x([t(l).e("icon"),t(l).e("password")]),onClick:Ye},{default:A(()=>[(h(),E(j(t(Ke))))]),_:1},8,["class"])):b("v-if",!0),t(z)?(h(),C("span",{key:3,class:x(t(l).e("count"))},[T("span",{class:x(t(l).e("count-inner"))},W(t(Z))+" / "+W(e.maxlength),3)],2)):b("v-if",!0),t(M)&&t(re)&&t(ie)?(h(),E(t(R),{key:4,class:x([t(l).e("icon"),t(l).e("validateIcon"),t(l).is("loading",t(M)==="validating")])},{default:A(()=>[(h(),E(j(t(re))))]),_:1},8,["class"])):b("v-if",!0)],2)],2)):b("v-if",!0)],2),b(" append slot "),e.$slots.append?(h(),C("div",{key:1,class:x(t(l).be("group","append"))},[U(e.$slots,"append")],2)):b("v-if",!0)],64)):(h(),C(ne,{key:1},[b(" textarea "),T("textarea",Te({id:t(y),ref_key:"textarea",ref:S,class:[t(F).e("inner"),t(l).is("focus",t(J))]},t(d),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(f),readonly:e.readonly,autocomplete:e.autocomplete,style:t(ue),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t(ve),onCompositionupdate:t(me),onCompositionend:t(he),onInput:Q,onFocus:t($e),onBlur:t(De),onChange:pe,onKeydown:ge}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),t(z)?(h(),C("span",{key:0,style:Ve(le.value),class:x(t(l).e("count"))},W(t(Z))+" / "+W(e.maxlength),7)):b("v-if",!0)],64))],38))}}));var jt=rt(Ut,[["__file","input.vue"]]);const Qt=ht(jt),eo=gt("token",{actions:{setToken(o,s){this.token[s]=o,o===null&&delete this.token[s]}},persist:!0,state:()=>({token:{}})});export{Qt as E,At as a,$t as b,Ot as c,eo as u};
