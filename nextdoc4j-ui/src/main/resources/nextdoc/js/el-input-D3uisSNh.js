var Xe=Object.defineProperty,Ze=Object.defineProperties;var et=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var tt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable;var Ce=(a,l,n)=>l in a?Xe(a,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[l]=n,K=(a,l)=>{for(var n in l||(l={}))tt.call(l,n)&&Ce(a,n,l[n]);if(we)for(var n of we(l))ot.call(l,n)&&Ce(a,n,l[n]);return a},Se=(a,l)=>Ze(a,et(l));var ee=(a,l,n)=>new Promise((o,u)=>{var p=r=>{try{i(n.next(r))}catch(v){u(v)}},c=r=>{try{i(n.throw(r))}catch(v){u(v)}},i=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,c);i((n=n.apply(a,l)).next())});import{aa as Re,i as Ee,d as at,m as nt,e as te,j as Ie,s as st,ab as oe,_ as lt,f as ke,ac as it,ad as rt,ae as ut,r as ct,af as dt,E as A,ag as pt,l as ft,w as vt,Q as mt}from"./bootstrap-Db4nggi8.js";import{U as se,a as ht,i as gt,b as yt,c as bt,d as xt,I as ze,C as Ne,e as Pe}from"./el-button-B89jIyPx.js";import{a as ae,q as wt,as as Y,P as H,Y as q,i as Fe,n as V,a4 as Ae,ak as Ct,aj as St,J as b,ac as Et,_ as It,an as C,aq as h,ao as y,F as ne,aD as T,ap as x,ag as t,aB as W,aJ as E,aE as O,aK as U,aC as Te,x as kt,aA as zt,aI as _,aG as Ve,o as Be}from"../jse/index-index-C_N8fNpC.js";import{b as Oe,u as Nt}from"./use-form-common-props-CgyhF5bG.js";const Pt=()=>Re&&/firefox/i.test(window.navigator.userAgent);let w;const Ft={height:"0",visibility:"hidden",overflow:Pt()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Tt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Vt(a){const l=window.getComputedStyle(a),n=l.getPropertyValue("box-sizing"),o=Number.parseFloat(l.getPropertyValue("padding-bottom"))+Number.parseFloat(l.getPropertyValue("padding-top")),u=Number.parseFloat(l.getPropertyValue("border-bottom-width"))+Number.parseFloat(l.getPropertyValue("border-top-width"));return{contextStyle:Tt.map(c=>[c,l.getPropertyValue(c)]),paddingSize:o,borderSize:u,boxSizing:n}}function Me(a,l=1,n){var o;w||(w=document.createElement("textarea"),document.body.appendChild(w));const{paddingSize:u,borderSize:p,boxSizing:c,contextStyle:i}=Vt(a);i.forEach(([g,I])=>w==null?void 0:w.style.setProperty(g,I)),Object.entries(Ft).forEach(([g,I])=>w==null?void 0:w.style.setProperty(g,I,"important")),w.value=a.value||a.placeholder||"";let r=w.scrollHeight;const v={};c==="border-box"?r=r+p:c==="content-box"&&(r=r-u),w.value="";const m=w.scrollHeight-u;if(Ee(l)){let g=m*l;c==="border-box"&&(g=g+u+p),r=Math.max(g,r),v.minHeight=`${g}px`}if(Ee(n)){let g=m*n;c==="border-box"&&(g=g+u+p),r=Math.min(g,r)}return v.height=`${r}px`,(o=w.parentNode)==null||o.removeChild(w),w=void 0,v}const Bt=at(K({id:{type:String,default:void 0},size:st,disabled:Boolean,modelValue:{type:te([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:te([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Ie},prefixIcon:{type:Ie},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:te([Object,Array,String]),default:()=>nt({})},autofocus:Boolean,rows:{type:Number,default:2}},ht(["ariaLabel"]))),Mt={[se]:a=>ae(a),input:a=>ae(a),change:a=>ae(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent};function Rt(a,{beforeFocus:l,afterFocus:n,beforeBlur:o,afterBlur:u}={}){const p=wt(),{emit:c}=p,i=Y(),r=Oe(),v=H(!1),m=f=>{Fe(l)&&l(f)||v.value||(v.value=!0,c("focus",f),n==null||n())},g=f=>{var s;Fe(o)&&o(f)||f.relatedTarget&&((s=i.value)!=null&&s.contains(f.relatedTarget))||(v.value=!1,c("blur",f),u==null||u())},I=f=>{var s,z;(s=i.value)!=null&&s.contains(document.activeElement)&&i.value!==document.activeElement||gt(f.target)||r.value||(z=a.value)==null||z.focus()};return q([i,r],([f,s])=>{f&&(s?f.removeAttribute("tabindex"):f.setAttribute("tabindex","-1"))}),oe(i,"focus",m,!0),oe(i,"blur",g,!0),oe(i,"click",I,!0),{isFocused:v,wrapperRef:i,handleFocus:m,handleBlur:g}}const At=a=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(a);function Ot({afterComposition:a,emit:l}){const n=H(!1),o=i=>{l==null||l("compositionstart",i),n.value=!0},u=i=>{var r;l==null||l("compositionupdate",i);const v=(r=i.target)==null?void 0:r.value,m=v[v.length-1]||"";n.value=!At(m)},p=i=>{l==null||l("compositionend",i),n.value&&(n.value=!1,V(()=>a(i)))};return{isComposing:n,handleComposition:i=>{i.type==="compositionend"?p(i):u(i)},handleCompositionStart:o,handleCompositionUpdate:u,handleCompositionEnd:p}}function Ht(a){let l;function n(){if(a.value==null)return;const{selectionStart:u,selectionEnd:p,value:c}=a.value;if(u==null||p==null)return;const i=c.slice(0,Math.max(0,u)),r=c.slice(Math.max(0,p));l={selectionStart:u,selectionEnd:p,value:c,beforeTxt:i,afterTxt:r}}function o(){if(a.value==null||l==null)return;const{value:u}=a.value,{beforeTxt:p,afterTxt:c,selectionStart:i}=l;if(p==null||c==null||i==null)return;let r=u.length;if(u.endsWith(c))r=u.length-c.length;else if(u.startsWith(p))r=p.length;else{const v=p[i-1],m=u.indexOf(v,i-1);m!==-1&&(r=m+1)}a.value.setSelectionRange(r,r)}return[n,o]}const Lt="ElInput",$t=Ae({name:Lt,inheritAttrs:!1}),Dt=Ae(Se(K({},$t),{props:Bt,emits:Mt,setup(a,{expose:l,emit:n}){const o=a,u=Ct(),p=yt(),c=St(),i=b(()=>[o.type==="textarea"?z.b():s.b(),s.m(I.value),s.is("disabled",f.value),s.is("exceed",Ke.value),{[s.b("group")]:c.prepend||c.append,[s.m("prefix")]:c.prefix||o.prefixIcon,[s.m("suffix")]:c.suffix||o.suffixIcon||o.clearable||o.showPassword,[s.bm("suffix","password-clear")]:j.value&&Q.value,[s.b("hidden")]:o.type==="hidden"},u.class]),r=b(()=>[s.e("wrapper"),s.is("focus",J.value)]),{form:v,formItem:m}=bt(),{inputId:g}=xt(o,{formItemContext:m}),I=Nt(),f=Oe(),s=ke("input"),z=ke("textarea"),L=Y(),S=Y(),G=H(!1),$=H(!1),le=H(),D=Y(o.inputStyle),N=b(()=>L.value||S.value),{wrapperRef:He,isFocused:J,handleFocus:Le,handleBlur:$e}=Rt(N,{beforeFocus(){return f.value},afterBlur(){var e;o.validateEvent&&((e=m==null?void 0:m.validate)==null||e.call(m,"blur").catch(d=>Pe()))}}),ie=b(()=>{var e;return(e=v==null?void 0:v.statusIcon)!=null?e:!1}),B=b(()=>(m==null?void 0:m.validateState)||""),re=b(()=>B.value&&it[B.value]),De=b(()=>$.value?rt:ut),je=b(()=>[u.style]),ue=b(()=>[o.inputStyle,D.value,{resize:o.resize}]),k=b(()=>ct(o.modelValue)?"":String(o.modelValue)),j=b(()=>o.clearable&&!f.value&&!o.readonly&&!!k.value&&(J.value||G.value)),Q=b(()=>o.showPassword&&!f.value&&!!k.value),P=b(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!f.value&&!o.readonly&&!o.showPassword),X=b(()=>k.value.length),Ke=b(()=>!!P.value&&X.value>Number(o.maxlength)),We=b(()=>!!c.suffix||!!o.suffixIcon||j.value||o.showPassword||P.value||!!B.value&&ie.value),[ce,de]=Ht(L);dt(S,e=>{if(Ue(),!P.value||o.resize!=="both")return;const d=e[0],{width:F}=d.contentRect;le.value={right:`calc(100% - ${F+15+6}px)`}});const M=()=>{const{type:e,autosize:d}=o;if(!(!Re||e!=="textarea"||!S.value))if(d){const F=Be(d)?d.minRows:void 0,be=Be(d)?d.maxRows:void 0,xe=Me(S.value,F,be);D.value=K({overflowY:"hidden"},xe),V(()=>{S.value.offsetHeight,D.value=xe})}else D.value={minHeight:Me(S.value).minHeight}},Ue=(e=>{let d=!1;return()=>{var F;if(d||!o.autosize)return;((F=S.value)==null?void 0:F.offsetParent)===null||(e(),d=!0)}})(M),R=()=>{const e=N.value,d=o.formatter?o.formatter(k.value):k.value;!e||e.value===d||(e.value=d)},Z=e=>ee(null,null,function*(){ce();let{value:d}=e.target;if(o.formatter&&o.parser&&(d=o.parser(d)),!fe.value){if(d===k.value){R();return}n(se,d),n(ze,d),yield V(),R(),de()}}),pe=e=>{let{value:d}=e.target;o.formatter&&o.parser&&(d=o.parser(d)),n(Ne,d)},{isComposing:fe,handleCompositionStart:ve,handleCompositionUpdate:me,handleCompositionEnd:he}=Ot({emit:n,afterComposition:Z}),_e=()=>{ce(),$.value=!$.value,setTimeout(de)},Ye=()=>{var e;return(e=N.value)==null?void 0:e.focus()},qe=()=>{var e;return(e=N.value)==null?void 0:e.blur()},Ge=e=>{G.value=!1,n("mouseleave",e)},Je=e=>{G.value=!0,n("mouseenter",e)},ge=e=>{n("keydown",e)},Qe=()=>{var e;(e=N.value)==null||e.select()},ye=()=>{n(se,""),n(Ne,""),n("clear"),n(ze,"")};return q(()=>o.modelValue,()=>{var e;V(()=>M()),o.validateEvent&&((e=m==null?void 0:m.validate)==null||e.call(m,"change").catch(d=>Pe()))}),q(k,()=>R()),q(()=>o.type,()=>ee(null,null,function*(){yield V(),R(),M()})),Et(()=>{!o.formatter&&o.parser,R(),V(M)}),l({input:L,textarea:S,ref:N,textareaStyle:ue,autosize:It(o,"autosize"),isComposing:fe,focus:Ye,blur:qe,select:Qe,clear:ye,resizeTextarea:M}),(e,d)=>(h(),C("div",{class:x([t(i),{[t(s).bm("group","append")]:e.$slots.append,[t(s).bm("group","prepend")]:e.$slots.prepend}]),style:Ve(t(je)),onMouseenter:Je,onMouseleave:Ge},[y(" input "),e.type!=="textarea"?(h(),C(ne,{key:0},[y(" prepend slot "),e.$slots.prepend?(h(),C("div",{key:0,class:x(t(s).be("group","prepend"))},[W(e.$slots,"prepend")],2)):y("v-if",!0),T("div",{ref_key:"wrapperRef",ref:He,class:x(t(r))},[y(" prefix slot "),e.$slots.prefix||e.prefixIcon?(h(),C("span",{key:0,class:x(t(s).e("prefix"))},[T("span",{class:x(t(s).e("prefix-inner"))},[W(e.$slots,"prefix"),e.prefixIcon?(h(),E(t(A),{key:0,class:x(t(s).e("icon"))},{default:O(()=>[(h(),E(U(e.prefixIcon)))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0),T("input",Te({id:t(g),ref_key:"input",ref:L,class:t(s).e("inner")},t(p),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?$.value?"text":"password":e.type,disabled:t(f),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,onCompositionstart:t(ve),onCompositionupdate:t(me),onCompositionend:t(he),onInput:Z,onChange:pe,onKeydown:ge}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),y(" suffix slot "),t(We)?(h(),C("span",{key:1,class:x(t(s).e("suffix"))},[T("span",{class:x(t(s).e("suffix-inner"))},[!t(j)||!t(Q)||!t(P)?(h(),C(ne,{key:0},[W(e.$slots,"suffix"),e.suffixIcon?(h(),E(t(A),{key:0,class:x(t(s).e("icon"))},{default:O(()=>[(h(),E(U(e.suffixIcon)))]),_:1},8,["class"])):y("v-if",!0)],64)):y("v-if",!0),t(j)?(h(),E(t(A),{key:1,class:x([t(s).e("icon"),t(s).e("clear")]),onMousedown:ft(t(zt),["prevent"]),onClick:ye},{default:O(()=>[kt(t(pt))]),_:1},8,["class","onMousedown"])):y("v-if",!0),t(Q)?(h(),E(t(A),{key:2,class:x([t(s).e("icon"),t(s).e("password")]),onClick:_e},{default:O(()=>[(h(),E(U(t(De))))]),_:1},8,["class"])):y("v-if",!0),t(P)?(h(),C("span",{key:3,class:x(t(s).e("count"))},[T("span",{class:x(t(s).e("count-inner"))},_(t(X))+" / "+_(e.maxlength),3)],2)):y("v-if",!0),t(B)&&t(re)&&t(ie)?(h(),E(t(A),{key:4,class:x([t(s).e("icon"),t(s).e("validateIcon"),t(s).is("loading",t(B)==="validating")])},{default:O(()=>[(h(),E(U(t(re))))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0)],2),y(" append slot "),e.$slots.append?(h(),C("div",{key:1,class:x(t(s).be("group","append"))},[W(e.$slots,"append")],2)):y("v-if",!0)],64)):(h(),C(ne,{key:1},[y(" textarea "),T("textarea",Te({id:t(g),ref_key:"textarea",ref:S,class:[t(z).e("inner"),t(s).is("focus",t(J))]},t(p),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(f),readonly:e.readonly,autocomplete:e.autocomplete,style:t(ue),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t(ve),onCompositionupdate:t(me),onCompositionend:t(he),onInput:Z,onFocus:t(Le),onBlur:t($e),onChange:pe,onKeydown:ge}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),t(P)?(h(),C("span",{key:0,style:Ve(le.value),class:x(t(s).e("count"))},_(t(X))+" / "+_(e.maxlength),7)):y("v-if",!0)],64))],38))}}));var jt=lt(Dt,[["__file","input.vue"]]);const Gt=vt(jt),Jt=mt("token",{actions:{setToken(a){this.token=a}},persist:{pick:["token"]},state:()=>({token:null})});export{Gt as E,Ot as a,Rt as b,Jt as u};
