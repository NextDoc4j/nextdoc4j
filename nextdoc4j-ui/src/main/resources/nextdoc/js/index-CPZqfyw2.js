var Ge=Object.defineProperty,Qe=Object.defineProperties;var Xe=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var we=(a,r,n)=>r in a?Ge(a,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[r]=n,D=(a,r)=>{for(var n in r||(r={}))Je.call(r,n)&&we(a,n,r[n]);if(xe)for(var n of xe(r))Ze.call(r,n)&&we(a,n,r[n]);return a},Se=(a,r)=>Qe(a,Xe(r));var X=(a,r,n)=>new Promise((o,d)=>{var c=l=>{try{b(n.next(l))}catch(x){d(x)}},u=l=>{try{b(n.throw(l))}catch(x){d(x)}},b=l=>l.done?o(l.value):Promise.resolve(l.value).then(c,u);b((n=n.apply(a,r)).next())});import{q as Ce,o as _e,P as et,p as J,L as Ie,s as tt,k as ot,l as Ee,V as at,Q as nt,R as st,r as rt,S as lt,E as B,U as it,C as ut,a as dt,w as pt}from"./bootstrap-Bwv7EoT6.js";import{i as ct}from"./browser-R1mRplSO.js";import{U as ae,u as ft,I as ze,C as Pe}from"./index-BIIh2HTk.js";import{U as Z,e as Me,a2 as vt,a3 as mt,c as v,V as _,r as ee,w as te,n as ht,W as O,t as yt,j as w,o as p,A as f,F as oe,l as V,O as m,u as t,v as W,q as C,s as R,B as j,x as Ne,E as gt,a4 as bt,D as U,P as Ve,a5 as ke}from"../jse/index-index-Cr1u2jcp.js";import{u as xt}from"./index-oyWSfp_e.js";import{u as wt,a as St}from"./use-form-item-BDbynDq4.js";import{u as Ct,b as It}from"./use-form-common-props-CCSLhXk1.js";import{u as Et,a as zt}from"./index-CLNXs_rc.js";import{d as Fe}from"./error-CYJGVSdm.js";import"./aria-DGfENwCE.js";let g;const Pt={height:"0",visibility:"hidden",overflow:ct()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Nt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Vt(a){const r=window.getComputedStyle(a),n=r.getPropertyValue("box-sizing"),o=Number.parseFloat(r.getPropertyValue("padding-bottom"))+Number.parseFloat(r.getPropertyValue("padding-top")),d=Number.parseFloat(r.getPropertyValue("border-bottom-width"))+Number.parseFloat(r.getPropertyValue("border-top-width"));return{contextStyle:Nt.map(u=>[u,r.getPropertyValue(u)]),paddingSize:o,borderSize:d,boxSizing:n}}function Te(a,r=1,n){var o;g||(g=document.createElement("textarea"),document.body.appendChild(g));const{paddingSize:d,borderSize:c,boxSizing:u,contextStyle:b}=Vt(a);b.forEach(([y,k])=>g==null?void 0:g.style.setProperty(y,k)),Object.entries(Pt).forEach(([y,k])=>g==null?void 0:g.style.setProperty(y,k,"important")),g.value=a.value||a.placeholder||"";let l=g.scrollHeight;const x={};u==="border-box"?l=l+c:u==="content-box"&&(l=l-d),g.value="";const h=g.scrollHeight-d;if(Ce(r)){let y=h*r;u==="border-box"&&(y=y+d+c),l=Math.max(y,l),x.minHeight=`${y}px`}if(Ce(n)){let y=h*n;u==="border-box"&&(y=y+d+c),l=Math.min(y,l)}return x.height=`${l}px`,(o=g.parentNode)==null||o.removeChild(g),g=void 0,x}const kt=_e(D({id:{type:String,default:void 0},size:tt,disabled:Boolean,modelValue:{type:J([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:J([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Ie},prefixIcon:{type:Ie},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:J([Object,Array,String]),default:()=>et({})},autofocus:Boolean,rows:{type:Number,default:2}},ft(["ariaLabel"]))),Ft={[ae]:a=>Z(a),input:a=>Z(a),change:a=>Z(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent};function Tt(a){let r;function n(){if(a.value==null)return;const{selectionStart:d,selectionEnd:c,value:u}=a.value;if(d==null||c==null)return;const b=u.slice(0,Math.max(0,d)),l=u.slice(Math.max(0,c));r={selectionStart:d,selectionEnd:c,value:u,beforeTxt:b,afterTxt:l}}function o(){if(a.value==null||r==null)return;const{value:d}=a.value,{beforeTxt:c,afterTxt:u,selectionStart:b}=r;if(c==null||u==null||b==null)return;let l=d.length;if(d.endsWith(u))l=d.length-u.length;else if(d.startsWith(c))l=c.length;else{const x=c[b-1],h=d.indexOf(x,b-1);h!==-1&&(l=h+1)}a.value.setSelectionRange(l,l)}return[n,o]}const Mt="ElInput",Bt=Me({name:Mt,inheritAttrs:!1}),Ot=Me(Se(D({},Bt),{props:kt,emits:Ft,setup(a,{expose:r,emit:n}){const o=a,d=vt(),c=xt(),u=mt(),b=v(()=>[o.type==="textarea"?ne.b():s.b(),s.m(k.value),s.is("disabled",I.value),s.is("exceed",$e.value),{[s.b("group")]:u.prepend||u.append,[s.m("prefix")]:u.prefix||o.prefixIcon,[s.m("suffix")]:u.suffix||o.suffixIcon||o.clearable||o.showPassword,[s.bm("suffix","password-clear")]:A.value&&q.value,[s.b("hidden")]:o.type==="hidden"},d.class]),l=v(()=>[s.e("wrapper"),s.is("focus",Y.value)]),{form:x,formItem:h}=wt(),{inputId:y}=St(o,{formItemContext:h}),k=Ct(),I=It(),s=Ee("input"),ne=Ee("textarea"),H=_(),S=_(),K=ee(!1),L=ee(!1),se=ee(),$=_(o.inputStyle),z=v(()=>H.value||S.value),{wrapperRef:Be,isFocused:Y,handleFocus:Oe,handleBlur:Re}=Et(z,{beforeFocus(){return I.value},afterBlur(){var e;o.validateEvent&&((e=h==null?void 0:h.validate)==null||e.call(h,"blur").catch(i=>Fe()))}}),re=v(()=>{var e;return(e=x==null?void 0:x.statusIcon)!=null?e:!1}),F=v(()=>(h==null?void 0:h.validateState)||""),le=v(()=>F.value&&at[F.value]),He=v(()=>L.value?nt:st),Le=v(()=>[d.style]),ie=v(()=>[o.inputStyle,$.value,{resize:o.resize}]),E=v(()=>rt(o.modelValue)?"":String(o.modelValue)),A=v(()=>o.clearable&&!I.value&&!o.readonly&&!!E.value&&(Y.value||K.value)),q=v(()=>o.showPassword&&!I.value&&!!E.value),P=v(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!I.value&&!o.readonly&&!o.showPassword),G=v(()=>E.value.length),$e=v(()=>!!P.value&&G.value>Number(o.maxlength)),Ae=v(()=>!!u.suffix||!!o.suffixIcon||A.value||o.showPassword||P.value||!!F.value&&re.value),[ue,de]=Tt(H);lt(S,e=>{if(De(),!P.value||o.resize!=="both")return;const i=e[0],{width:N}=i.contentRect;se.value={right:`calc(100% - ${N+15+6}px)`}});const T=()=>{const{type:e,autosize:i}=o;if(!(!dt||e!=="textarea"||!S.value))if(i){const N=ke(i)?i.minRows:void 0,ge=ke(i)?i.maxRows:void 0,be=Te(S.value,N,ge);$.value=D({overflowY:"hidden"},be),O(()=>{S.value.offsetHeight,$.value=be})}else $.value={minHeight:Te(S.value).minHeight}},De=(e=>{let i=!1;return()=>{var N;if(i||!o.autosize)return;((N=S.value)==null?void 0:N.offsetParent)===null||(e(),i=!0)}})(T),M=()=>{const e=z.value,i=o.formatter?o.formatter(E.value):E.value;!e||e.value===i||(e.value=i)},Q=e=>X(null,null,function*(){ue();let{value:i}=e.target;if(o.formatter&&o.parser&&(i=o.parser(i)),!ce.value){if(i===E.value){M();return}n(ae,i),n(ze,i),yield O(),M(),de()}}),pe=e=>{let{value:i}=e.target;o.formatter&&o.parser&&(i=o.parser(i)),n(Pe,i)},{isComposing:ce,handleCompositionStart:fe,handleCompositionUpdate:ve,handleCompositionEnd:me}=zt({emit:n,afterComposition:Q}),We=()=>{ue(),L.value=!L.value,setTimeout(de)},je=()=>{var e;return(e=z.value)==null?void 0:e.focus()},Ue=()=>{var e;return(e=z.value)==null?void 0:e.blur()},Ke=e=>{K.value=!1,n("mouseleave",e)},Ye=e=>{K.value=!0,n("mouseenter",e)},he=e=>{n("keydown",e)},qe=()=>{var e;(e=z.value)==null||e.select()},ye=()=>{n(ae,""),n(Pe,""),n("clear"),n(ze,"")};return te(()=>o.modelValue,()=>{var e;O(()=>T()),o.validateEvent&&((e=h==null?void 0:h.validate)==null||e.call(h,"change").catch(i=>Fe()))}),te(E,()=>M()),te(()=>o.type,()=>X(null,null,function*(){yield O(),M(),T()})),ht(()=>{!o.formatter&&o.parser,M(),O(T)}),r({input:H,textarea:S,ref:z,textareaStyle:ie,autosize:yt(o,"autosize"),isComposing:ce,focus:je,blur:Ue,select:qe,clear:ye,resizeTextarea:T}),(e,i)=>(p(),w("div",{class:m([t(b),{[t(s).bm("group","append")]:e.$slots.append,[t(s).bm("group","prepend")]:e.$slots.prepend}]),style:Ve(t(Le)),onMouseenter:Ye,onMouseleave:Ke},[f(" input "),e.type!=="textarea"?(p(),w(oe,{key:0},[f(" prepend slot "),e.$slots.prepend?(p(),w("div",{key:0,class:m(t(s).be("group","prepend"))},[W(e.$slots,"prepend")],2)):f("v-if",!0),V("div",{ref_key:"wrapperRef",ref:Be,class:m(t(l))},[f(" prefix slot "),e.$slots.prefix||e.prefixIcon?(p(),w("span",{key:0,class:m(t(s).e("prefix"))},[V("span",{class:m(t(s).e("prefix-inner"))},[W(e.$slots,"prefix"),e.prefixIcon?(p(),C(t(B),{key:0,class:m(t(s).e("icon"))},{default:R(()=>[(p(),C(j(e.prefixIcon)))]),_:1},8,["class"])):f("v-if",!0)],2)],2)):f("v-if",!0),V("input",Ne({id:t(y),ref_key:"input",ref:H,class:t(s).e("inner")},t(c),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?L.value?"text":"password":e.type,disabled:t(I),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,onCompositionstart:t(fe),onCompositionupdate:t(ve),onCompositionend:t(me),onInput:Q,onChange:pe,onKeydown:he}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),f(" suffix slot "),t(Ae)?(p(),w("span",{key:1,class:m(t(s).e("suffix"))},[V("span",{class:m(t(s).e("suffix-inner"))},[!t(A)||!t(q)||!t(P)?(p(),w(oe,{key:0},[W(e.$slots,"suffix"),e.suffixIcon?(p(),C(t(B),{key:0,class:m(t(s).e("icon"))},{default:R(()=>[(p(),C(j(e.suffixIcon)))]),_:1},8,["class"])):f("v-if",!0)],64)):f("v-if",!0),t(A)?(p(),C(t(B),{key:1,class:m([t(s).e("icon"),t(s).e("clear")]),onMousedown:ut(t(bt),["prevent"]),onClick:ye},{default:R(()=>[gt(t(it))]),_:1},8,["class","onMousedown"])):f("v-if",!0),t(q)?(p(),C(t(B),{key:2,class:m([t(s).e("icon"),t(s).e("password")]),onClick:We},{default:R(()=>[(p(),C(j(t(He))))]),_:1},8,["class"])):f("v-if",!0),t(P)?(p(),w("span",{key:3,class:m(t(s).e("count"))},[V("span",{class:m(t(s).e("count-inner"))},U(t(G))+" / "+U(e.maxlength),3)],2)):f("v-if",!0),t(F)&&t(le)&&t(re)?(p(),C(t(B),{key:4,class:m([t(s).e("icon"),t(s).e("validateIcon"),t(s).is("loading",t(F)==="validating")])},{default:R(()=>[(p(),C(j(t(le))))]),_:1},8,["class"])):f("v-if",!0)],2)],2)):f("v-if",!0)],2),f(" append slot "),e.$slots.append?(p(),w("div",{key:1,class:m(t(s).be("group","append"))},[W(e.$slots,"append")],2)):f("v-if",!0)],64)):(p(),w(oe,{key:1},[f(" textarea "),V("textarea",Ne({id:t(y),ref_key:"textarea",ref:S,class:[t(ne).e("inner"),t(s).is("focus",t(Y))]},t(c),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(I),readonly:e.readonly,autocomplete:e.autocomplete,style:t(ie),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t(fe),onCompositionupdate:t(ve),onCompositionend:t(me),onInput:Q,onFocus:t(Oe),onBlur:t(Re),onChange:pe,onKeydown:he}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),t(P)?(p(),w("span",{key:0,style:Ve(se.value),class:m(t(s).e("count"))},U(t(G))+" / "+U(e.maxlength),7)):f("v-if",!0)],64))],38))}}));var Rt=ot(Ot,[["__file","input.vue"]]);const Qt=pt(Rt);export{Qt as ElInput,Qt as default,Ft as inputEmits,kt as inputProps};
