var I=(b,_,s)=>new Promise((y,c)=>{var g=o=>{try{u(s.next(o))}catch(i){c(i)}},x=o=>{try{u(s.throw(o))}catch(i){c(i)}},u=o=>o.done?y(o.value):Promise.resolve(o.value).then(g,x);u((s=s.apply(b,_)).next())});import{g as U}from"./schema-vKUyM2il.js";import{a4 as H,P as w,b1 as W,J as p,aP as X,ao as n,ar as t,aq as h,F as k,aD as r,ap as m,aI as v,a$ as N,aJ as T,ah as Y,a1 as Z}from"../jse/index-index-BoHc453y.js";import{t as J,$ as F,_ as D}from"./bootstrap-DHniKkV2.js";import{p as ee}from"./enumexpand-BETr1-NE.js";const ae={class:"node-header"},se={class:"count-label"},te={key:0,class:"preview-separator"},ne={key:0,class:"preview-empty"},le={class:"key-name"},re=["innerHTML"],oe={key:2,class:"preview-separator"},ue={key:2,class:"comma"},ce={key:3,class:"field-description"},ie={class:"comment-content"},pe={key:0,class:"node-content"},de={class:"node-footer"},me={class:"bracket"},ve={key:0,class:"comma"},fe={key:1,class:"node-primitive"},ye=["innerHTML"],ke={key:1,class:"comma"},he={key:2,class:"field-description"},ge={class:"comment-content"},be=H({__name:"json-node",props:{defaultExpanded:{type:Boolean},depth:{},isLastItem:{type:Boolean},keyName:{},parentSchema:{},schema:{},value:{}},setup(b,{expose:_}){const s=b,y=w([]),c=w(s.defaultExpanded),{copy:g,copied:x}=W({legacy:!0}),u=p(()=>s.value===null?"null":Array.isArray(s.value)?"array":typeof s.value),o=p(()=>u.value==="object"||u.value==="array"),i=p(()=>u.value==="array"?s.value.length:u.value==="object"?Object.keys(s.value).length:0),P=p(()=>{if(!c.value||i.value===0)return"";const e=i.value;return u.value==="array"?`${e} element${e===1?"":"s"}`:`${e} entr${e===1?"y":"ies"}`}),V=p(()=>u.value==="array"?"[":"{"),S=p(()=>u.value==="array"?"]":"}"),A=p(()=>!s.parentSchema||s.keyName===null?s.schema:s.parentSchema.type==="array"&&s.parentSchema.items?s.parentSchema.items:s.parentSchema.properties&&s.parentSchema.properties[s.keyName]?s.parentSchema.properties[s.keyName]:null),j=p(()=>{const e=A.value;if(!e)return null;const a=e.description||"",d=ee(e);return d?a?`${a} (${d})`:`(${d})`:a||null});function E(e){const a=String(e),[d,l]=a.split("."),f=d.replaceAll(/\B(?=(\d{3})+(?!\d))/g,'<span class="num-delim"></span>');return l?`${f}.${l}`:f}function O(e,a=!1){if(e===null)return{text:"null",class:"value-null"};if(e===void 0)return{text:"undefined",class:"value-undefined"};if(typeof e=="string")return{text:`"${e}"`,class:"value-string"};if(typeof e=="boolean")return{text:String(e),class:"value-boolean"};if(typeof e=="number")return{text:E(e),class:"value-number",isHtml:!0};if(Array.isArray(e)){if(a&&e.length>0){const d=Math.min(e.length,4),l=Array.from({length:d}).fill("{…}"),f=e.length>4?`, … ${e.length-4} more`:"";return{text:`[${l.join(", ")}${f}]`,class:"value-array"}}return{text:"[…]",class:"value-array"}}return typeof e=="object"?{text:"{…}",class:"value-object"}:{text:String(e),class:""}}const B=p(()=>{if(u.value!=="array"||i.value===0)return[];const e=i.value,a=Math.min(e,4),d=Array.from({length:a}).fill(null).map(()=>({text:"{…}",class:"value-object"}));return e>4&&d.push({text:`… ${e-4} more`,class:"preview-more",isMore:!0}),d}),C=p(()=>{if(u.value!=="object")return[];const e=s.value,a=Object.keys(e);if(a.length===0)return[];const d=a.slice(0,4).map(l=>({key:l,value:O(e[l],!0),isMore:null}));return a.length>4&&d.push({key:"",value:{text:`… ${a.length-4} more`,class:"preview-more"},isMore:!0}),d}),q=p(()=>{const e=s.value;return e===null?"null":e===void 0?"undefined":typeof e=="string"?`"${e}"`:typeof e=="boolean"?String(e):typeof e=="number"?E(e):String(e)}),z=p(()=>`value-${u.value}`),M=p(()=>typeof s.keyName=="number"?"key-index":"key-name"),L=p(()=>u.value==="array"?Array.from({length:i.value},(e,a)=>a):u.value==="object"?Object.keys(s.value):[]),K=p(()=>o.value&&c.value&&i.value>0);function $(){c.value=!c.value}function G(){o.value&&(c.value=!0,y.value.forEach(e=>{var a;return(a=e.expandAll)==null?void 0:a.call(e)}))}function Q(){o.value&&(s.depth>0&&(c.value=!1),y.value.forEach(e=>{var a;return(a=e.collapseAll)==null?void 0:a.call(e)}))}function R(){return I(this,null,function*(){const e=JSON.stringify(s.value,null,2);yield g(e),x.value?J({duration:1500,type:"success",message:`${F("common.copySuccess")}`}):J({duration:1500,type:"error",message:`${F("common.copyFailed")}`})})}return _({expandAll:G,collapseAll:Q}),(e,a)=>{const d=X("JsonNode",!0);return t(),n("div",{class:h(["json-node",{"has-collapse-btn":K.value}])},[o.value?(t(),n(k,{key:0},[r("div",ae,[e.keyName!==null&&typeof e.keyName!="number"?(t(),n("div",{key:0,class:h(["key-wrapper",M.value])},[r("span",null,v(e.keyName),1),a[0]||(a[0]=r("span",{class:"preview-colon"},": ",-1))],2)):m("",!0),r("span",{class:"bracket",onClick:$},v(V.value),1),c.value&&i.value>0?(t(),n(k,{key:1},[r("button",{class:"json-btn-collapse collapse-btn",onClick:$}),r("button",{class:"json-btn-copy collapse-btn",onClick:R}),r("span",se,v(P.value),1)],64)):m("",!0),c.value?m("",!0):(t(),n(k,{key:2},[u.value==="array"?(t(),n("span",{key:0,class:"preview-container",onClick:$},[(t(!0),n(k,null,N(B.value,(l,f)=>(t(),n(k,{key:f},[r("span",{class:h(l.class)},v(l.text),3),f<B.value.length-1?(t(),n("span",te,", ")):m("",!0)],64))),128))])):u.value==="object"?(t(),n("span",{key:1,class:"preview-container",onClick:$},[C.value.length===0?(t(),n("span",ne,"empty")):(t(!0),n(k,{key:1},N(C.value,(l,f)=>(t(),n(k,{key:f},[l.isMore?(t(),n("span",{key:1,class:h(l.value.class)},v(l.value.text),3)):(t(),n(k,{key:0},[r("span",le,v(l.key),1),a[1]||(a[1]=r("span",{class:"preview-colon"},": ",-1)),l.value.isHtml?(t(),n("span",{key:0,class:h(l.value.class),innerHTML:l.value.text},null,10,re)):(t(),n("span",{key:1,class:h(l.value.class)},v(l.value.text),3))],64)),f<C.value.length-1?(t(),n("span",oe,", ")):m("",!0)],64))),128))])):m("",!0),r("span",{class:"bracket",onClick:$},v(S.value),1),!e.isLastItem&&e.depth>0?(t(),n("span",ue,",")):m("",!0)],64)),j.value&&(c.value||i.value===0)?(t(),n("span",ce,[a[2]||(a[2]=r("span",{class:"comment-prefix"},"//",-1)),r("span",ie,v(j.value),1)])):m("",!0)]),c.value?(t(),n("div",pe,[a[3]||(a[3]=r("div",{class:"vertical-line"},null,-1)),(t(!0),n(k,null,N(L.value,(l,f)=>(t(),T(d,{key:l,ref_for:!0,ref_key:"childNodes",ref:y,value:(u.value==="array",e.value[l]),"key-name":l,depth:e.depth+1,"default-expanded":e.defaultExpanded,"is-last-item":f===L.value.length-1,"parent-schema":A.value,style:{"padding-left":"32px"}},null,8,["value","key-name","depth","default-expanded","is-last-item","parent-schema"]))),128)),r("div",de,[r("span",me,v(S.value),1),!e.isLastItem&&e.depth>0?(t(),n("span",ve,",")):m("",!0)])])):m("",!0)],64)):(t(),n("div",fe,[e.keyName!==null?(t(),n("span",{key:0,class:h(["key-wrapper",M.value])},[r("span",null,v(e.keyName),1),a[4]||(a[4]=r("span",null,": ",-1))],2)):m("",!0),r("span",{class:h(z.value),innerHTML:q.value},null,10,ye),e.isLastItem?m("",!0):(t(),n("span",ke,",")),j.value?(t(),n("span",he,[a[5]||(a[5]=r("span",{class:"comment-prefix"},"//",-1)),r("span",ge,v(j.value),1)])):m("",!0)]))],2)}}}),_e=D(be,[["__scopeId","data-v-7afa63fa"]]),xe={key:0,class:"json-error"},$e={key:1,class:"json-empty"},je=H({__name:"index",props:{defaultExpanded:{type:Boolean,default:!0},schema:{}},setup(b,{expose:_}){const s=b,y=w(null),c=p(()=>{if(!s.schema)return null;try{return U(s.schema)}catch(o){return console.error("Failed to generate example from schema:",o),null}}),g=p(()=>c.value===null&&s.schema?"Invalid schema format":null);function x(){var o;(o=y.value)==null||o.expandAll()}function u(){var o;(o=y.value)==null||o.collapseAll()}return _({expandAll:x,collapseAll:u}),(o,i)=>(t(),n("div",{class:h(["overflow-auto rounded p-4 font-mono text-sm",`theme-${Y(Z).theme.mode}`])},[g.value?(t(),n("div",xe,[i[0]||(i[0]=r("span",{class:"text-sm"},"⚠️",-1)),r("span",null,v(g.value),1)])):c.value?(t(),T(_e,{key:2,ref_key:"rootNode",ref:y,value:c.value,"key-name":null,depth:0,"default-expanded":o.defaultExpanded,schema:o.schema,"parent-schema":null},null,8,["value","default-expanded","schema"])):(t(),n("div",$e,i[1]||(i[1]=[r("span",null,"暂无数据",-1)])))],2))}}),Ee=D(je,[["__scopeId","data-v-b57fe610"]]);export{Ee as J};
