import{M as v}from"./bootstrap-CqDtmTe9.js";import{b as m}from"./use-form-common-props-1NQPH8QO.js";import{l as A,s as x,r as C,w as T,a as h,$ as E}from"../jse/index-index-Cxxqr7bn.js";const F=a=>{if(a.tabIndex>0||a.tabIndex===0&&a.getAttribute("tabIndex")!==null)return!0;if(a.tabIndex<0||a.hasAttribute("disabled")||a.getAttribute("aria-disabled")==="true")return!1;switch(a.nodeName){case"A":return!!a.href&&a.rel!=="ignore";case"INPUT":return!(a.type==="hidden"||a.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}};function y(a,{beforeFocus:o,afterFocus:n,beforeBlur:l,afterBlur:i}={}){const c=A(),{emit:f}=c,t=x(),r=m(),u=C(!1),d=s=>{h(o)&&o(s)||u.value||(u.value=!0,f("focus",s),n==null||n())},b=s=>{var e;h(l)&&l(s)||s.relatedTarget&&((e=t.value)!=null&&e.contains(s.relatedTarget))||(u.value=!1,f("blur",s),i==null||i())},g=s=>{var e,p;(e=t.value)!=null&&e.contains(document.activeElement)&&t.value!==document.activeElement||F(s.target)||r.value||(p=a.value)==null||p.focus()};return T([t,r],([s,e])=>{s&&(e?s.removeAttribute("tabindex"):s.setAttribute("tabindex","-1"))}),v(t,"focus",d,!0),v(t,"blur",b,!0),v(t,"click",g,!0),{isFocused:u,wrapperRef:t,handleFocus:d,handleBlur:b}}const I=a=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(a);function N({afterComposition:a,emit:o}){const n=C(!1),l=t=>{o==null||o("compositionstart",t),n.value=!0},i=t=>{var r;o==null||o("compositionupdate",t);const u=(r=t.target)==null?void 0:r.value,d=u[u.length-1]||"";n.value=!I(d)},c=t=>{o==null||o("compositionend",t),n.value&&(n.value=!1,E(()=>a(t)))};return{isComposing:n,handleComposition:t=>{t.type==="compositionend"?c(t):i(t)},handleCompositionStart:l,handleCompositionUpdate:i,handleCompositionEnd:c}}export{N as a,F as i,y as u};
