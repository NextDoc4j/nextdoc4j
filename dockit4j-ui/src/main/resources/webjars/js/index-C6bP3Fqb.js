var lt=Object.defineProperty,it=Object.defineProperties;var ut=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var ct=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable;var fe=(e,t,a)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,M=(e,t)=>{for(var a in t||(t={}))ct.call(t,a)&&fe(e,a,t[a]);if(de)for(var a of de(t))dt.call(t,a)&&fe(e,a,t[a]);return e},N=(e,t)=>it(e,ut(t));var V=(e,t,a)=>new Promise((o,c)=>{var u=p=>{try{T(a.next(p))}catch(m){c(m)}},f=p=>{try{T(a.throw(p))}catch(m){c(m)}},T=p=>p.done?o(p.value):Promise.resolve(p.value).then(u,f);T((a=a.apply(e,t)).next())});import{a2 as De,aB as ft,ai as pe,g as Be,G as pt,aC as gt,l as W,m as h,n as X,o as z,aD as yt,aE as _e,S as vt,aF as Ie,F as Me,E as q,w as Ne,q as qe,O as se,s as bt,v as Ke,B as G,aG as mt,aH as ht,aI as $t,aJ as Tt,aK as kt,aL as wt}from"./bootstrap-CqDtmTe9.js";import{d as I,m as S,a as He,U as ge,f as E,o as b,x as w,P as v,u as r,j as _,M as K,z as P,A as Y,q as A,B as U,y as jt,i as ze,a4 as C,r as Ge,F as Et,Y as St,D as B,k as Ct,s as re,av as ye,w as ve,a9 as Ft,a8 as Pt,t as Ut,T as be,V as me}from"../jse/index-index-Cxxqr7bn.js";import{t as ne,d as Lt}from"./error-C2hIFQwM.js";import{b as x}from"./use-form-common-props-1NQPH8QO.js";import{o as Ot,U as he,f as Rt,g as oe,h as We,n as Q,j as At,S as Dt,l as Bt,a as _t}from"./isEqual-BznGHF9m.js";var $e=Object.create,It=function(){function e(){}return function(t){if(!De(t))return{};if($e)return $e(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}();function Mt(e,t){for(var a=-1,o=e==null?0:e.length;++a<o&&t(e[a],a,e)!==!1;);return e}var Nt=Ot(Object.getPrototypeOf,Object),Ve=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Te=Ve&&typeof module=="object"&&module&&!module.nodeType&&module,qt=Te&&Te.exports===Ve,ke=qt?ft.Buffer:void 0,we=ke?ke.allocUnsafe:void 0;function Kt(e,t){if(t)return e.slice();var a=e.length,o=we?we(a):new e.constructor(a);return e.copy(o),o}var Ht=Object.prototype,zt=Ht.hasOwnProperty;function Gt(e){var t=e.length,a=new e.constructor(t);return t&&typeof e[0]=="string"&&zt.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function le(e){var t=new e.constructor(e.byteLength);return new he(t).set(new he(e)),t}function Wt(e,t){var a=le(e.buffer);return new e.constructor(a,e.byteOffset,e.byteLength)}var Vt=/\w*$/;function Xt(e){var t=new e.constructor(e.source,Vt.exec(e));return t.lastIndex=e.lastIndex,t}var je=pe?pe.prototype:void 0,Ee=je?je.valueOf:void 0;function Jt(e){return Ee?Object(Ee.call(e)):{}}function Yt(e,t){var a=t?le(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var Qt="[object Boolean]",Zt="[object Date]",xt="[object Map]",ea="[object Number]",ta="[object RegExp]",aa="[object Set]",sa="[object String]",ra="[object Symbol]",na="[object ArrayBuffer]",oa="[object DataView]",la="[object Float32Array]",ia="[object Float64Array]",ua="[object Int8Array]",ca="[object Int16Array]",da="[object Int32Array]",fa="[object Uint8Array]",pa="[object Uint8ClampedArray]",ga="[object Uint16Array]",ya="[object Uint32Array]";function va(e,t,a){var o=e.constructor;switch(t){case na:return le(e);case Qt:case Zt:return new o(+e);case oa:return Wt(e);case la:case ia:case ua:case ca:case da:case fa:case pa:case ga:case ya:return Yt(e,a);case xt:return new o;case ea:case sa:return new o(e);case ta:return Xt(e);case aa:return new o;case ra:return Jt(e)}}function ba(e){return typeof e.constructor=="function"&&!Rt(e)?It(Nt(e)):{}}var ma="[object Map]";function ha(e){return Be(e)&&oe(e)==ma}var Se=Q&&Q.isMap,$a=Se?We(Se):ha,Ta="[object Set]";function ka(e){return Be(e)&&oe(e)==Ta}var Ce=Q&&Q.isSet,wa=Ce?We(Ce):ka,ja=1,Xe="[object Arguments]",Ea="[object Array]",Sa="[object Boolean]",Ca="[object Date]",Fa="[object Error]",Je="[object Function]",Pa="[object GeneratorFunction]",Ua="[object Map]",La="[object Number]",Ye="[object Object]",Oa="[object RegExp]",Ra="[object Set]",Aa="[object String]",Da="[object Symbol]",Ba="[object WeakMap]",_a="[object ArrayBuffer]",Ia="[object DataView]",Ma="[object Float32Array]",Na="[object Float64Array]",qa="[object Int8Array]",Ka="[object Int16Array]",Ha="[object Int32Array]",za="[object Uint8Array]",Ga="[object Uint8ClampedArray]",Wa="[object Uint16Array]",Va="[object Uint32Array]",$={};$[Xe]=$[Ea]=$[_a]=$[Ia]=$[Sa]=$[Ca]=$[Ma]=$[Na]=$[qa]=$[Ka]=$[Ha]=$[Ua]=$[La]=$[Ye]=$[Oa]=$[Ra]=$[Aa]=$[Da]=$[za]=$[Ga]=$[Wa]=$[Va]=!0;$[Fa]=$[Je]=$[Ba]=!1;function J(e,t,a,o,c,u){var f,T=t&ja;if(f!==void 0)return f;if(!De(e))return e;var p=pt(e);if(p)f=Gt(e);else{var m=oe(e),j=m==Je||m==Pa;if(At(e))return Kt(e,T);if(m==Ye||m==Xe||j&&!c)f=j?{}:ba(e);else{if(!$[m])return c?e:{};f=va(e,m,T)}}u||(u=new Dt);var y=u.get(e);if(y)return y;u.set(e,f),wa(e)?e.forEach(function(i){f.add(J(i,t,a,i,e,u))}):$a(e)&&e.forEach(function(i,s){f.set(s,J(i,t,a,s,e,u))});var L=Bt,n=p?void 0:L(e);return Mt(n||e,function(i,s){n&&(s=i,i=e[s]),gt(f,s,J(i,t,a,s,e,u))}),f}var Xa=1,Ja=4;function Fe(e){return J(e,Xa|Ja)}const Ya=W({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:h(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:h([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:h(Function),default:e=>`${e}%`}}),Qa=I({name:"ElProgress"}),Za=I(N(M({},Qa),{props:Ya,setup(e){const t=e,a={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},o=z("progress"),c=S(()=>{const l={width:`${t.percentage}%`,animationDuration:`${t.duration}s`},k=F(t.percentage);return k.includes("gradient")?l.background=k:l.backgroundColor=k,l}),u=S(()=>(t.strokeWidth/t.width*100).toFixed(1)),f=S(()=>["circle","dashboard"].includes(t.type)?Number.parseInt(`${50-Number.parseFloat(u.value)/2}`,10):0),T=S(()=>{const l=f.value,k=t.type==="dashboard";return`
          M 50 50
          m 0 ${k?"":"-"}${l}
          a ${l} ${l} 0 1 1 0 ${k?"-":""}${l*2}
          a ${l} ${l} 0 1 1 0 ${k?"":"-"}${l*2}
          `}),p=S(()=>2*Math.PI*f.value),m=S(()=>t.type==="dashboard"?.75:1),j=S(()=>`${-1*p.value*(1-m.value)/2}px`),y=S(()=>({strokeDasharray:`${p.value*m.value}px, ${p.value}px`,strokeDashoffset:j.value})),L=S(()=>({strokeDasharray:`${p.value*m.value*(t.percentage/100)}px, ${p.value}px`,strokeDashoffset:j.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),n=S(()=>{let l;return t.color?l=F(t.percentage):l=a[t.status]||a.default,l}),i=S(()=>t.status==="warning"?yt:t.type==="line"?t.status==="success"?_e:vt:t.status==="success"?Ie:Me),s=S(()=>t.type==="line"?12+t.strokeWidth*.4:t.width*.111111+2),g=S(()=>t.format(t.percentage));function d(l){const k=100/l.length;return l.map((O,R)=>ge(O)?{color:O,percentage:(R+1)*k}:O).sort((O,R)=>O.percentage-R.percentage)}const F=l=>{var k;const{color:D}=t;if(He(D))return D(l);if(ge(D))return D;{const O=d(D);for(const R of O)if(R.percentage>l)return R.color;return(k=O[O.length-1])==null?void 0:k.color}};return(l,k)=>(b(),E("div",{class:v([r(o).b(),r(o).m(l.type),r(o).is(l.status),{[r(o).m("without-text")]:!l.showText,[r(o).m("text-inside")]:l.textInside}]),role:"progressbar","aria-valuenow":l.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[l.type==="line"?(b(),E("div",{key:0,class:v(r(o).b("bar"))},[_("div",{class:v(r(o).be("bar","outer")),style:K({height:`${l.strokeWidth}px`})},[_("div",{class:v([r(o).be("bar","inner"),{[r(o).bem("bar","inner","indeterminate")]:l.indeterminate},{[r(o).bem("bar","inner","striped")]:l.striped},{[r(o).bem("bar","inner","striped-flow")]:l.stripedFlow}]),style:K(r(c))},[(l.showText||l.$slots.default)&&l.textInside?(b(),E("div",{key:0,class:v(r(o).be("bar","innerText"))},[P(l.$slots,"default",{percentage:l.percentage},()=>[_("span",null,Y(r(g)),1)])],2)):w("v-if",!0)],6)],6)],2)):(b(),E("div",{key:1,class:v(r(o).b("circle")),style:K({height:`${l.width}px`,width:`${l.width}px`})},[(b(),E("svg",{viewBox:"0 0 100 100"},[_("path",{class:v(r(o).be("circle","track")),d:r(T),stroke:`var(${r(o).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":l.strokeLinecap,"stroke-width":r(u),fill:"none",style:K(r(y))},null,14,["d","stroke","stroke-linecap","stroke-width"]),_("path",{class:v(r(o).be("circle","path")),d:r(T),stroke:r(n),fill:"none",opacity:l.percentage?1:0,"stroke-linecap":l.strokeLinecap,"stroke-width":r(u),style:K(r(L))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(l.showText||l.$slots.default)&&!l.textInside?(b(),E("div",{key:2,class:v(r(o).e("text")),style:K({fontSize:`${r(s)}px`})},[P(l.$slots,"default",{percentage:l.percentage},()=>[l.status?(b(),A(r(q),{key:1},{default:U(()=>[(b(),A(jt(r(i))))]),_:1})):(b(),E("span",{key:0},Y(r(g)),1))])],6)):w("v-if",!0)],10,["aria-valuenow"]))}}));var xa=X(Za,[["__file","progress.vue"]]);const es=Ne(xa),ie=Symbol("uploadContextKey"),ts="ElUpload";class as extends Error{constructor(t,a,o,c){super(t),this.name="UploadAjaxError",this.status=a,this.method=o,this.url=c}}function Pe(e,t,a){let o;return a.response?o=`${a.response.error||a.response}`:a.responseText?o=`${a.responseText}`:o=`fail to ${t.method} ${e} ${a.status}`,new as(o,a.status,t.method,e)}function ss(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(a){return t}}const rs=e=>{typeof XMLHttpRequest=="undefined"&&ne(ts,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,a=e.action;t.upload&&t.upload.addEventListener("progress",u=>{const f=u;f.percent=u.total>0?u.loaded/u.total*100:0,e.onProgress(f)});const o=new FormData;if(e.data)for(const[u,f]of Object.entries(e.data))ze(f)&&f.length?o.append(u,...f):o.append(u,f);o.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(Pe(a,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(Pe(a,e,t));e.onSuccess(ss(t))}),t.open(e.method,a,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const c=e.headers||{};if(c instanceof Headers)c.forEach((u,f)=>t.setRequestHeader(f,u));else for(const[u,f]of Object.entries(c))qe(f)||t.setRequestHeader(u,String(f));return t.send(o),t},ue=["text","picture","picture-card"];let ns=1;const Z=()=>Date.now()+ns++,ce=W({action:{type:String,default:"#"},headers:{type:h(Object)},method:{type:String,default:"post"},data:{type:h([Object,Function,Promise]),default:()=>se({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:h(Array),default:()=>se([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:ue,default:"text"},httpRequest:{type:h(Function),default:rs},disabled:Boolean,limit:Number}),Qe=W(N(M({},ce),{beforeUpload:{type:h(Function),default:C},beforeRemove:{type:h(Function)},onRemove:{type:h(Function),default:C},onChange:{type:h(Function),default:C},onPreview:{type:h(Function),default:C},onSuccess:{type:h(Function),default:C},onProgress:{type:h(Function),default:C},onError:{type:h(Function),default:C},onExceed:{type:h(Function),default:C},crossorigin:{type:h(String)}})),Ze=W({files:{type:h(Array),default:()=>se([])},disabled:{type:Boolean,default:!1},handlePreview:{type:h(Function),default:C},listType:{type:String,values:ue,default:"text"},crossorigin:{type:h(String)}}),xe={remove:e=>!!e},os=I({name:"ElUploadList"}),ls=I(N(M({},os),{props:Ze,emits:xe,setup(e,{emit:t}){const a=e,{t:o}=bt(),c=z("upload"),u=z("icon"),f=z("list"),T=x(),p=Ge(!1),m=S(()=>[c.b("list"),c.bm("list",a.listType),c.is("disabled",a.disabled)]),j=y=>{t("remove",y)};return(y,L)=>(b(),A(Tt,{tag:"ul",class:v(r(m)),name:r(f).b()},{default:U(()=>[(b(!0),E(Et,null,St(y.files,(n,i)=>(b(),E("li",{key:n.uid||n.name,class:v([r(c).be("list","item"),r(c).is(n.status),{focusing:p.value}]),tabindex:"0",onKeydown:Ke(s=>!r(T)&&j(n),["delete"]),onFocus:s=>p.value=!0,onBlur:s=>p.value=!1,onClick:s=>p.value=!1},[P(y.$slots,"default",{file:n,index:i},()=>[y.listType==="picture"||n.status!=="uploading"&&y.listType==="picture-card"?(b(),E("img",{key:0,class:v(r(c).be("list","item-thumbnail")),src:n.url,crossorigin:y.crossorigin,alt:""},null,10,["src","crossorigin"])):w("v-if",!0),n.status==="uploading"||y.listType!=="picture-card"?(b(),E("div",{key:1,class:v(r(c).be("list","item-info"))},[_("a",{class:v(r(c).be("list","item-name")),onClick:G(s=>y.handlePreview(n),["prevent"])},[B(r(q),{class:v(r(u).m("document"))},{default:U(()=>[B(r(mt))]),_:1},8,["class"]),_("span",{class:v(r(c).be("list","item-file-name")),title:n.name},Y(n.name),11,["title"])],10,["onClick"]),n.status==="uploading"?(b(),A(r(es),{key:0,type:y.listType==="picture-card"?"circle":"line","stroke-width":y.listType==="picture-card"?6:2,percentage:Number(n.percentage),style:K(y.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):w("v-if",!0)],2)):w("v-if",!0),_("label",{class:v(r(c).be("list","item-status-label"))},[y.listType==="text"?(b(),A(r(q),{key:0,class:v([r(u).m("upload-success"),r(u).m("circle-check")])},{default:U(()=>[B(r(_e))]),_:1},8,["class"])):["picture-card","picture"].includes(y.listType)?(b(),A(r(q),{key:1,class:v([r(u).m("upload-success"),r(u).m("check")])},{default:U(()=>[B(r(Ie))]),_:1},8,["class"])):w("v-if",!0)],2),r(T)?w("v-if",!0):(b(),A(r(q),{key:2,class:v(r(u).m("close")),onClick:s=>j(n)},{default:U(()=>[B(r(Me))]),_:2},1032,["class","onClick"])),w(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),w(" This is a bug which needs to be fixed "),w(" TODO: Fix the incorrect navigation interaction "),r(T)?w("v-if",!0):(b(),E("i",{key:3,class:v(r(u).m("close-tip"))},Y(r(o)("el.upload.deleteTip")),3)),y.listType==="picture-card"?(b(),E("span",{key:4,class:v(r(c).be("list","item-actions"))},[_("span",{class:v(r(c).be("list","item-preview")),onClick:s=>y.handlePreview(n)},[B(r(q),{class:v(r(u).m("zoom-in"))},{default:U(()=>[B(r(ht))]),_:1},8,["class"])],10,["onClick"]),r(T)?w("v-if",!0):(b(),E("span",{key:0,class:v(r(c).be("list","item-delete")),onClick:s=>j(n)},[B(r(q),{class:v(r(u).m("delete"))},{default:U(()=>[B(r($t))]),_:1},8,["class"])],10,["onClick"]))],2)):w("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),P(y.$slots,"append")]),_:3},8,["class","name"]))}}));var Ue=X(ls,[["__file","upload-list.vue"]]);const et=W({disabled:{type:Boolean,default:!1}}),tt={file:e=>ze(e)},at="ElUploadDrag",is=I({name:at}),us=I(N(M({},is),{props:et,emits:tt,setup(e,{emit:t}){Ct(ie)||ne(at,"usage: <el-upload><el-upload-dragger /></el-upload>");const o=z("upload"),c=Ge(!1),u=x(),f=p=>{if(u.value)return;c.value=!1,p.stopPropagation();const m=Array.from(p.dataTransfer.files),j=p.dataTransfer.items||[];m.forEach((y,L)=>{var n;const i=j[L],s=(n=i==null?void 0:i.webkitGetAsEntry)==null?void 0:n.call(i);s&&(y.isDirectory=s.isDirectory)}),t("file",m)},T=()=>{u.value||(c.value=!0)};return(p,m)=>(b(),E("div",{class:v([r(o).b("dragger"),r(o).is("dragover",c.value)]),onDrop:G(f,["prevent"]),onDragover:G(T,["prevent"]),onDragleave:G(j=>c.value=!1,["prevent"])},[P(p.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}}));var cs=X(us,[["__file","upload-dragger.vue"]]);const st=W(N(M({},ce),{beforeUpload:{type:h(Function),default:C},onRemove:{type:h(Function),default:C},onStart:{type:h(Function),default:C},onSuccess:{type:h(Function),default:C},onProgress:{type:h(Function),default:C},onError:{type:h(Function),default:C},onExceed:{type:h(Function),default:C}})),ds=I({name:"ElUploadContent",inheritAttrs:!1}),fs=I(N(M({},ds),{props:st,setup(e,{expose:t}){const a=e,o=z("upload"),c=x(),u=re({}),f=re(),T=s=>{if(s.length===0)return;const{autoUpload:g,limit:d,fileList:F,multiple:l,onStart:k,onExceed:D}=a;if(d&&F.length+s.length>d){D(s,F);return}l||(s=s.slice(0,1));for(const O of s){const R=O;R.uid=Z(),k(R),g&&p(R)}},p=s=>V(null,null,function*(){if(f.value.value="",!a.beforeUpload)return j(s);let g,d={};try{const l=a.data,k=a.beforeUpload(s);d=ye(a.data)?Fe(a.data):a.data,g=yield k,ye(a.data)&&_t(l,d)&&(d=Fe(a.data))}catch(l){g=!1}if(g===!1){a.onRemove(s);return}let F=s;g instanceof Blob&&(g instanceof File?F=g:F=new File([g],s.name,{type:s.type})),j(Object.assign(F,{uid:s.uid}),d)}),m=(s,g)=>V(null,null,function*(){return He(s)?s(g):s}),j=(s,g)=>V(null,null,function*(){const{headers:d,data:F,method:l,withCredentials:k,name:D,action:O,onProgress:R,onSuccess:rt,onError:nt,httpRequest:ot}=a;try{g=yield m(g!=null?g:F,s)}catch(H){a.onRemove(s);return}const{uid:ee}=s,te={headers:d||{},withCredentials:k,file:s,data:g,method:l,filename:D,action:O,onProgress:H=>{R(H,s)},onSuccess:H=>{rt(H,s),delete u.value[ee]},onError:H=>{nt(H,s),delete u.value[ee]}},ae=ot(te);u.value[ee]=ae,ae instanceof Promise&&ae.then(te.onSuccess,te.onError)}),y=s=>{const g=s.target.files;g&&T(Array.from(g))},L=()=>{c.value||(f.value.value="",f.value.click())},n=()=>{L()};return t({abort:s=>{kt(u.value).filter(s?([d])=>String(s.uid)===d:()=>!0).forEach(([d,F])=>{F instanceof XMLHttpRequest&&F.abort(),delete u.value[d]})},upload:p}),(s,g)=>(b(),E("div",{class:v([r(o).b(),r(o).m(s.listType),r(o).is("drag",s.drag),r(o).is("disabled",r(c))]),tabindex:r(c)?"-1":"0",onClick:L,onKeydown:Ke(G(n,["self"]),["enter","space"])},[s.drag?(b(),A(cs,{key:0,disabled:r(c),onFile:T},{default:U(()=>[P(s.$slots,"default")]),_:3},8,["disabled"])):P(s.$slots,"default",{key:1}),_("input",{ref_key:"inputRef",ref:f,class:v(r(o).e("input")),name:s.name,disabled:r(c),multiple:s.multiple,accept:s.accept,type:"file",onChange:y,onClick:G(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}}));var Le=X(fs,[["__file","upload-content.vue"]]);const Oe="ElUpload",Re=e=>{var t;(t=e.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(e.url)},ps=(e,t)=>{const a=wt(e,"fileList",void 0,{passive:!0}),o=n=>a.value.find(i=>i.uid===n.uid);function c(n){var i;(i=t.value)==null||i.abort(n)}function u(n=["ready","uploading","success","fail"]){a.value=a.value.filter(i=>!n.includes(i.status))}function f(n){a.value=a.value.filter(i=>i.uid!==n.uid)}const T=(n,i)=>{const s=o(i);s&&(console.error(n),s.status="fail",f(s),e.onError(n,s,a.value),e.onChange(s,a.value))},p=(n,i)=>{const s=o(i);s&&(e.onProgress(n,s,a.value),s.status="uploading",s.percentage=Math.round(n.percent))},m=(n,i)=>{const s=o(i);s&&(s.status="success",s.response=n,e.onSuccess(n,s,a.value),e.onChange(s,a.value))},j=n=>{qe(n.uid)&&(n.uid=Z());const i={name:n.name,percentage:0,status:"ready",size:n.size,raw:n,uid:n.uid};if(e.listType==="picture-card"||e.listType==="picture")try{i.url=URL.createObjectURL(n)}catch(s){Lt(Oe,s.message),e.onError(s,i,a.value)}a.value=[...a.value,i],e.onChange(i,a.value)},y=n=>V(null,null,function*(){const i=n instanceof File?o(n):n;i||ne(Oe,"file to be removed not found");const s=g=>{c(g),f(g),e.onRemove(g,a.value),Re(g)};e.beforeRemove?(yield e.beforeRemove(i,a.value))!==!1&&s(i):s(i)});function L(){a.value.filter(({status:n})=>n==="ready").forEach(({raw:n})=>{var i;return n&&((i=t.value)==null?void 0:i.upload(n))})}return ve(()=>e.listType,n=>{n!=="picture-card"&&n!=="picture"||(a.value=a.value.map(i=>{const{raw:s,url:g}=i;if(!g&&s)try{i.url=URL.createObjectURL(s)}catch(d){e.onError(d,i,a.value)}return i}))}),ve(a,n=>{for(const i of n)i.uid||(i.uid=Z()),i.status||(i.status="success")},{immediate:!0,deep:!0}),{uploadFiles:a,abort:c,clearFiles:u,handleError:T,handleProgress:p,handleStart:j,handleSuccess:m,handleRemove:y,submit:L,revokeFileObjectURL:Re}},gs=I({name:"ElUpload"}),ys=I(N(M({},gs),{props:Qe,setup(e,{expose:t}){const a=e,o=x(),c=re(),{abort:u,submit:f,clearFiles:T,uploadFiles:p,handleStart:m,handleError:j,handleRemove:y,handleSuccess:L,handleProgress:n,revokeFileObjectURL:i}=ps(a,c),s=S(()=>a.listType==="picture-card"),g=S(()=>N(M({},a),{fileList:p.value,onStart:m,onProgress:n,onSuccess:L,onError:j,onRemove:y}));return Ft(()=>{p.value.forEach(i)}),Pt(ie,{accept:Ut(a,"accept")}),t({abort:u,submit:f,clearFiles:T,handleStart:m,handleRemove:y}),(d,F)=>(b(),E("div",null,[r(s)&&d.showFileList?(b(),A(Ue,{key:0,disabled:r(o),"list-type":d.listType,files:r(p),crossorigin:d.crossorigin,"handle-preview":d.onPreview,onRemove:r(y)},be({append:U(()=>[B(Le,me({ref_key:"uploadRef",ref:c},r(g)),{default:U(()=>[d.$slots.trigger?P(d.$slots,"trigger",{key:0}):w("v-if",!0),!d.$slots.trigger&&d.$slots.default?P(d.$slots,"default",{key:1}):w("v-if",!0)]),_:3},16)]),_:2},[d.$slots.file?{name:"default",fn:U(({file:l,index:k})=>[P(d.$slots,"file",{file:l,index:k})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):w("v-if",!0),!r(s)||r(s)&&!d.showFileList?(b(),A(Le,me({key:1,ref_key:"uploadRef",ref:c},r(g)),{default:U(()=>[d.$slots.trigger?P(d.$slots,"trigger",{key:0}):w("v-if",!0),!d.$slots.trigger&&d.$slots.default?P(d.$slots,"default",{key:1}):w("v-if",!0)]),_:3},16)):w("v-if",!0),d.$slots.trigger?P(d.$slots,"default",{key:2}):w("v-if",!0),P(d.$slots,"tip"),!r(s)&&d.showFileList?(b(),A(Ue,{key:3,disabled:r(o),"list-type":d.listType,files:r(p),crossorigin:d.crossorigin,"handle-preview":d.onPreview,onRemove:r(y)},be({_:2},[d.$slots.file?{name:"default",fn:U(({file:l,index:k})=>[P(d.$slots,"file",{file:l,index:k})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):w("v-if",!0)]))}}));var vs=X(ys,[["__file","upload.vue"]]);const Ae=Ne(vs),ws=Object.freeze(Object.defineProperty({__proto__:null,ElUpload:Ae,default:Ae,genFileId:Z,uploadBaseProps:ce,uploadContentProps:st,uploadContextKey:ie,uploadDraggerEmits:tt,uploadDraggerProps:et,uploadListEmits:xe,uploadListProps:Ze,uploadListTypes:ue,uploadProps:Qe},Symbol.toStringTag,{value:"Module"}));export{Ae as E,Yt as a,Z as b,Kt as c,ws as d,Nt as g,ba as i};
